(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{878:function(e,t,a){"use strict";var n=a(80),o=a(886),r=a.n(o);function i(e){if("undefined"!==typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),n=0;n!==e.length;++n)a[n]=255&e.charCodeAt(n);return t}for(var o=new Array(e.length),r=0;r!==e.length;++r)o[r]=255&e.charCodeAt(r);return o}function l(e){for(var t="",a=0;e>0;)a=e%26+1,t=String.fromCharCode(a+64)+t,e=(e-a)/26;return t}function c(e,t,a){var n=e[0];e.unshift({});var o=[];for(var c in n)o.push(c),e[0][c]=c;var s=[];e.map(function(e,t){return o.map(function(n,o){return Object.assign({},{v:e[n],position:(o>25?l(o):String.fromCharCode(65+o))+(t+a.length)})})}).reduce(function(e,t){return e.concat(t)}).forEach(function(e,t){s[e.position]={v:e.v}});for(var u={},d=0;d<a.length;d++)for(var p=a[d],f=0;f<p.length;f++){u[String.fromCharCode(65+d)+(f+1)]={v:p[f].label+":"+p[f].value}}s=Object.assign(u,s);var m=Object.keys(s),h={SheetNames:["mySheet"],Sheets:{mySheet:Object.assign({},s,{"!ref":"A1:"+m[m.length-1]})}},v=r.a.write(h,{bookType:"xlsx",type:"binary"}),g=new Blob([i(v)],{type:"application/octet-stream"}),y=URL.createObjectURL(g),b=document.createElement("a");b.href=y,b.download=t||"\u5bfc\u51fa\u6570\u636e.xlsx",document.body.appendChild(b),b.click(),document.body.removeChild(b),setTimeout(function(){URL.revokeObjectURL(g)},100)}t.a={exportFile:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[]];a&&(e=e.map(function(e,t){for(var n={},o=0,r=Object.keys(e);o<r.length;o++){var i=r[o];if(i in a){var l=e[i];!0===l&&(l="\u662f"),!1===l&&(l="\u5426"),null!==l&&void 0!==l||(l=""),n[a[i]]=l}}return n})),c(e,t,n)},exportFileByConfig:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[]];a&&(e=e.map(function(e,t){for(var n={},o=0,r=Object.keys(a);o<r.length;o++){var i=r[o],l=e[i];!0===l&&(l="\u662f"),!1===l&&(l="\u5426"),null!==l&&void 0!==l||(l=""),n[a[i]]=l}return n})),c(e,t,n)},toJSON:function(e,t){return new Promise(function(a,n){if(window.FileReader){var o=[],i=new FileReader;return i.readAsBinaryString(e),void(i.onload=function(e){try{var i=e.target.result,l=r.a.read(i,{type:"binary"}),c=!0,s=!1,u=void 0;try{for(var d,p=l.SheetNames[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var f=d.value;l.Sheets[f]&&(o=t?o.concat(r.a.utils.sheet_to_json(l.Sheets[f],t)):o.concat(r.a.utils.sheet_to_json(l.Sheets[f])))}}catch(m){s=!0,u=m}finally{try{c||null==p.return||p.return()}finally{if(s)throw u}}a(o)}catch(h){return n(new Error("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e"))}})}n(new Error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u8bf7\u66f4\u6362\u6216\u5347\u7ea7\u6d4f\u89c8\u5668"))})},parseToJSON:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(o,i){if(window.FileReader){var l=[],c=new FileReader;return c.readAsBinaryString(e),void(c.onload=function(e){try{var c=e.target.result,s=r.a.read(c,{type:"binary"}),u=s.SheetNames[0],d=s.Sheets[u];d&&(l=r.a.utils.sheet_to_json(d,Object(n.a)({defval:""},a)),t&&l.forEach(function(e){for(var a in e)t[a]&&(e[t[a]]=e[a],delete e[a])})),o(l)}catch(p){i(new Error("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e"))}})}i(new Error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u8bf7\u66f4\u6362\u6216\u5347\u7ea7\u6d4f\u89c8\u5668"))})}}},879:function(e,t){},880:function(e,t,a){"use strict";a(273);var n=a(66),o=(a(274),a(102)),r=a(1),i=a.n(r);t.a=function(e){var t=e.label,a=e.defaultVal,r=e.name,l=e.formItemChange,c=e.className,s=void 0===c?"search-input":c;return i.a.createElement(n.a.Item,{label:t},i.a.createElement(o.a,{placeholder:t,allowClear:!0,name:r,className:s,value:a,onChange:function(e){l({name:r,value:e.target.value,doSearchHandel:!1})}}))}},883:function(e,t,a){"use strict";a(28),a(884)},884:function(e,t,a){},885:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(1),o=a(277),r=a(10),i=a(13);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(a[n[o]]=e[n[o]])}return a},m=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=u(this,d(t).apply(this,arguments))).saveTooltip=function(t){e.tooltip=t},e.renderPopover=function(t){var a=t.getPrefixCls,r=e.props,i=r.prefixCls,l=f(r,["prefixCls"]);delete l.title;var s=a("popover",i);return n.createElement(o.a,c({},l,{prefixCls:s,ref:e.saveTooltip,overlay:e.getOverlay(s)}))},e}var a,l,m;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,n["Component"]),a=t,(l=[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getOverlay",value:function(e){var t=this.props,a=t.title,o=t.content;return Object(i.a)(!("overlay"in this.props),"Popover","`overlay` is removed, please use `content` instead, see: https://u.ant.design/popover-content"),n.createElement("div",null,a&&n.createElement("div",{className:"".concat(e,"-title")},a),n.createElement("div",{className:"".concat(e,"-inner-content")},o))}},{key:"render",value:function(){return n.createElement(r.a,null,this.renderPopover)}}])&&s(a.prototype,l),m&&s(a,m),t}();m.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}}},887:function(e,t){},888:function(e,t){},913:function(e,t,a){"use strict";a.r(t);a(382);var n=a(275),o=(a(273),a(66)),r=(a(883),a(885)),i=(a(386),a(153)),l=(a(387),a(86)),c=(a(122),a(38)),s=(a(123),a(7)),u=a(80),d=a(124),p=a(29),f=a(30),m=a(27),h=a(31),v=a(32),g=a(1),y=a.n(g),b=a(306),w=a(33),N=a(880),E=a(279),S=a(59),O=a(878),C=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).formItemChange=function(e){a.setState(Object(d.a)({},e.name,e.value))},a.onPageSizeChange=function(e,t){a.setState({pageSize:t},function(){a.doSearchHandel()})},a.pageNumChange=function(e){a.setState({pageNum:e},function(){a.doSearchHandel()})},a.showTotal=function(){return"\u5171 ".concat(a.state.total," \u6761")},a.doSearchHandel=function(e){var t=a.state,n=t.pageNum,o=t.pageSize,r=t.barcode,i=t.erpGoodsNo,l=t.vendorGoodsNo,c=t.paperNo;e&&(n=1),a.setState({loading:!0});var s={pageNum:n,pageSize:o,barcode:r,erpGoodsNo:i,vendorGoodsNo:l,paperNo:c};a.$http.post(E.a.orderDetail,Object(u.a)({},s)).then(function(e){if(a.setState({loading:!1}),0!==e.code)throw new Error(e.msg);var t=(e.data&&e.data.result&&e.data.result.length?e.data.result:[]).map(function(e){return e.unique="".concat(e.barcode).concat(e.erpGoodsNo).concat(e.vendorGoodsNo),e});a.setState({tableData:t,total:e.data.total})}).catch(function(e){a.setState({loading:!1}),S.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})},a.doExportDataHandel=function(){a.setState({exportLoading:!0});var e={pageNum:1,pageSize:2e3,barcode:a.state.barcode,erpGoodsNo:a.state.erpGoodsNo,vendorGoodsNo:a.state.vendorGoodsNo,paperNo:a.state.paperNo},t=a.state.paperNo;a.$http.post(E.a.orderDetail,Object(u.a)({},e)).then(function(e){if(a.setState({exportLoading:!1}),0!==e.code)throw new Error(e.msg);var n=e.data&&e.data.result&&e.data.result.length?e.data.result:[];n.length>0?O.a.exportFileByConfig(n,"".concat(t,"\u8be6\u60c5.xlsx"),a.state.exportConfig):S.a.openNotification("warning","\u7cfb\u7edf\u63d0\u793a","\u6ca1\u6709\u67e5\u8be2\u5230\u53ef\u5bfc\u51fa\u6570\u636e")}).catch(function(e){a.setState({exportLoading:!1}),S.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})},a.goBackHandel=function(){a.props.history.push("/order_mgt")},a.doResetHandel=function(){a.setState({pageNum:1,pageSize:10,total:0,barcode:"",erpGoodsNo:"",vendorGoodsNo:"",tableData:[]},function(){a.doSearchHandel(!0)})},a.state={paperNo:e.match.params.id||"",orderMsg:w.a.get("orderMsg")||{},formLayout:"vertical",pageNum:1,pageSize:10,total:0,loading:!1,exportLoading:!1,barcode:"",erpGoodsNo:"",vendorGoodsNo:"",columns:[{title:"\u8d27\u53f7",dataIndex:"vendorGoodsNo",width:60},{title:"\u6761\u7801",dataIndex:"barcode",width:70},{title:"\u5546\u54c1\u7f16\u7801",dataIndex:"erpGoodsNo",width:90},{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"goodsName",width:90},{title:"\u5355\u4f4d",dataIndex:"unit",width:70},{title:"\u89c4\u683c",dataIndex:"spec",width:70},{title:"\u8ba2\u5355\u91d1\u989d",dataIndex:"amount",width:90},{title:"\u8ba2\u5355\u6570\u91cf",dataIndex:"qty",width:90},{title:"\u6536\u8d27\u6570\u91cf",dataIndex:"receiveQty",width:90},{title:"\u8d60\u54c1\u6570\u91cf",dataIndex:"giftQty",width:90},{title:"\u6536\u8d27\u5355\u4ef7",dataIndex:"price",width:90},{title:"\u6536\u8d27\u603b\u91d1\u989d",dataIndex:"totalReceiveAmount",width:110},{title:"\u5907\u6ce8",dataIndex:"remark",width:120}],tableData:[],exportConfig:{vendorGoodsNo:"\u8d27\u53f7",barcode:"\u6761\u7801",erpGoodsNo:"\u5546\u54c1\u7f16\u7801",goodsName:"\u5546\u54c1\u540d\u79f0",unit:"\u5355\u4f4d",spec:"\u89c4\u683c",amount:"\u8ba2\u5355\u91d1\u989d",qty:"\u8ba2\u5355\u6570\u91cf",receiveQty:"\u6536\u8d27\u6570\u91cf",giftQty:"\u8d60\u54c1\u6570\u91cf",price:"\u6536\u8d27\u5355\u4ef7",totalReceiveAmount:"\u6536\u8d27\u603b\u91d1\u989d",remark:"\u5907\u6ce8"}},a}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.doSearchHandel()}},{key:"render",value:function(){var e=this.state.orderMsg,t=e.paperNo,a=e.storeName,u=e.createUserName,d=e.createUserContact,p=e.authDatetime,f=e.expectDatetime,m=this.state.tableData,h=this.state.columns;return y.a.createElement("div",{className:"main-container"},y.a.createElement("div",{className:"operation-wraper"},y.a.createElement(c.a,{type:"primary",href:"/886072e393710563/print/".concat(t),target:"_blank"},y.a.createElement(s.a,{type:"printer"}),"\u6253\u5370")),y.a.createElement("hr",{className:"s-slip"}),y.a.createElement("div",{className:"operation-wraper"},y.a.createElement(i.a,{type:"flex",align:"bottom",gutter:10},y.a.createElement(l.a,{span:16},y.a.createElement(i.a,null,y.a.createElement(l.a,{span:12},"\u95e8\u5e97/\u4ed3\u5e93\uff1a",a||"--"),y.a.createElement(l.a,{span:12},"\u8ba2\u5355\u7f16\u53f7\uff1a",t)),y.a.createElement(i.a,null,y.a.createElement(l.a,{span:12},"\u8054\u7cfb\u4eba: ",u||"--"),y.a.createElement(l.a,{span:12},"\u8054\u7cfb\u7535\u8bdd: ",d||"--")),y.a.createElement(i.a,null,y.a.createElement(l.a,{span:12},"\u5355\u636e\u65f6\u95f4: ",p||"--"),y.a.createElement(l.a,{span:12},"\u671f\u671b\u9001\u8fbe\u65f6\u95f4: ",f||"--"))),y.a.createElement(l.a,{span:8},y.a.createElement(b.a,{paperNo:t})))),y.a.createElement("hr",{className:"s-slip"}),y.a.createElement("div",{className:"search-wraper"},y.a.createElement(o.a,{layout:this.state.formLayout},y.a.createElement(N.a,{label:"\u8d27\u53f7",name:"vendorGoodsNo",defaultVal:this.state.vendorGoodsNo,formItemChange:this.formItemChange}),y.a.createElement(N.a,{label:"\u6761\u7801",name:"barcode",defaultVal:this.state.barcode,formItemChange:this.formItemChange}),y.a.createElement(N.a,{label:"\u5546\u54c1\u7f16\u7801",name:"erpGoodsNo",defaultVal:this.state.erpGoodsNo,formItemChange:this.formItemChange}),y.a.createElement(o.a.Item,{className:"btn-wrap",label:"\xa0 "},y.a.createElement(c.a,{type:"primary",onClick:this.doSearchHandel.bind(this,!0)},y.a.createElement(s.a,{type:"search"}),"\u67e5\u8be2"),y.a.createElement(c.a,{onClick:this.doResetHandel.bind(this)},y.a.createElement(s.a,{type:"reload"}),"\u91cd\u7f6e"),y.a.createElement(r.a,{content:"\u6bcf\u6b21\u6700\u591a\u53ef\u5bfc\u51fa2000\u6761\u6570\u636e",trigger:"hover"},y.a.createElement(c.a,{onClick:this.doExportDataHandel.bind(this),disabled:this.state.exportLoading},this.state.exportLoading?y.a.createElement(s.a,{type:"loading"}):y.a.createElement(s.a,{type:"download"}),"\u5bfc\u51fa"))))),y.a.createElement("div",{className:"content-wraper"},y.a.createElement(n.a,{rowKey:function(e){return e.unique},columns:h,dataSource:m,loading:this.state.loading,pagination:{size:"middle",pageSizeOptions:["10","50","100","150","200"],showSizeChanger:!0,showQuickJumper:!0,defaultCurrent:this.state.pageNum,total:this.state.total,onShowSizeChange:this.onPageSizeChange,onChange:this.pageNumChange,showTotal:this.showTotal},scroll:{x:1220}}),y.a.createElement("hr",{className:"s-slip"}),y.a.createElement("div",{className:"footer-wrap"},y.a.createElement(c.a,{type:"primary",onClick:this.goBackHandel},y.a.createElement(s.a,{type:"left"}),"\u8fd4\u56de"))))}},{key:"componentWillUnmount",value:function(){w.a.remove("orderMsg")}}]),t}(g.Component);t.default=C}}]);
//# sourceMappingURL=7.714410d9.chunk.js.map