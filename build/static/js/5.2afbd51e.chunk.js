(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{878:function(e,t,a){"use strict";var o=a(80),n=a(886),r=a.n(n);function s(e){if("undefined"!==typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),o=0;o!==e.length;++o)a[o]=255&e.charCodeAt(o);return t}for(var n=new Array(e.length),r=0;r!==e.length;++r)n[r]=255&e.charCodeAt(r);return n}function i(e){for(var t="",a=0;e>0;)a=e%26+1,t=String.fromCharCode(a+64)+t,e=(e-a)/26;return t}function l(e,t,a){var o=e[0];e.unshift({});var n=[];for(var l in o)n.push(l),e[0][l]=l;var d=[];e.map(function(e,t){return n.map(function(o,n){return Object.assign({},{v:e[o],position:(n>25?i(n):String.fromCharCode(65+n))+(t+a.length)})})}).reduce(function(e,t){return e.concat(t)}).forEach(function(e,t){d[e.position]={v:e.v}});for(var c={},m=0;m<a.length;m++)for(var u=a[m],h=0;h<u.length;h++){c[String.fromCharCode(65+m)+(h+1)]={v:u[h].label+":"+u[h].value}}d=Object.assign(c,d);var g=Object.keys(d),f={SheetNames:["mySheet"],Sheets:{mySheet:Object.assign({},d,{"!ref":"A1:"+g[g.length-1]})}},p=r.a.write(f,{bookType:"xlsx",type:"binary"}),v=new Blob([s(p)],{type:"application/octet-stream"}),N=URL.createObjectURL(v),S=document.createElement("a");S.href=N,S.download=t||"\u5bfc\u51fa\u6570\u636e.xlsx",document.body.appendChild(S),S.click(),document.body.removeChild(S),setTimeout(function(){URL.revokeObjectURL(v)},100)}t.a={exportFile:function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[]];a&&(e=e.map(function(e,t){for(var o={},n=0,r=Object.keys(e);n<r.length;n++){var s=r[n];if(s in a){var i=e[s];!0===i&&(i="\u662f"),!1===i&&(i="\u5426"),null!==i&&void 0!==i||(i=""),o[a[s]]=i}}return o})),l(e,t,o)},exportFileByConfig:function(e,t,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[[]];a&&(e=e.map(function(e,t){for(var o={},n=0,r=Object.keys(a);n<r.length;n++){var s=r[n],i=e[s];!0===i&&(i="\u662f"),!1===i&&(i="\u5426"),null!==i&&void 0!==i||(i=""),o[a[s]]=i}return o})),l(e,t,o)},toJSON:function(e,t){return new Promise(function(a,o){if(window.FileReader){var n=[],s=new FileReader;return s.readAsBinaryString(e),void(s.onload=function(e){try{var s=e.target.result,i=r.a.read(s,{type:"binary"}),l=!0,d=!1,c=void 0;try{for(var m,u=i.SheetNames[Symbol.iterator]();!(l=(m=u.next()).done);l=!0){var h=m.value;i.Sheets[h]&&(n=t?n.concat(r.a.utils.sheet_to_json(i.Sheets[h],t)):n.concat(r.a.utils.sheet_to_json(i.Sheets[h])))}}catch(g){d=!0,c=g}finally{try{l||null==u.return||u.return()}finally{if(d)throw c}}a(n)}catch(f){return o(new Error("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e"))}})}o(new Error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u8bf7\u66f4\u6362\u6216\u5347\u7ea7\u6d4f\u89c8\u5668"))})},parseToJSON:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise(function(n,s){if(window.FileReader){var i=[],l=new FileReader;return l.readAsBinaryString(e),void(l.onload=function(e){try{var l=e.target.result,d=r.a.read(l,{type:"binary"}),c=d.SheetNames[0],m=d.Sheets[c];m&&(i=r.a.utils.sheet_to_json(m,Object(o.a)({defval:""},a)),t&&i.forEach(function(e){for(var a in e)t[a]&&(e[t[a]]=e[a],delete e[a])})),n(i)}catch(u){s(new Error("\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e"))}})}s(new Error("\u8be5\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd\uff0c\u8bf7\u66f4\u6362\u6216\u5347\u7ea7\u6d4f\u89c8\u5668"))})}}},879:function(e,t){},880:function(e,t,a){"use strict";a(273);var o=a(66),n=(a(274),a(102)),r=a(1),s=a.n(r);t.a=function(e){var t=e.label,a=e.defaultVal,r=e.name,i=e.formItemChange,l=e.className,d=void 0===l?"search-input":l;return s.a.createElement(o.a.Item,{label:t},s.a.createElement(n.a,{placeholder:t,allowClear:!0,name:r,className:d,value:a,onChange:function(e){i({name:r,value:e.target.value,doSearchHandel:!1})}}))}},881:function(e,t,a){"use strict";a(273);var o=a(66),n=(a(383),a(276)),r=(a(382),a(275)),s=(a(122),a(38)),i=a(70),l=a(124),d=a(80),c=a(29),m=a(30),u=a(27),h=a(31),g=a(32),f=(a(274),a(102)),p=a(1),v=a.n(p),N=a(159),S=a(59),y=f.a.Search,b=[],w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(h.a)(t).call(this,e))).onSearch=function(){a.setState({visible:!0}),a.doSearchHandel()},a.doSearchHandel=function(){var e=a.state.vendorNo&&a.state.vendorNo.length>0?a.state.vendorNo:a.state.venderOptions.map(function(e){return e.value}),t={pageNum:1,pageSize:-1,storeNo:a.state.storeNo,storeName:a.state.storeName};e&&e.length&&(t.vendorNoList=e),a.setState({loading:!0}),a.$http.post(N.a.queryVendorStore,Object(d.a)({},t)).then(function(e){if(a.setState({loading:!1}),0!==e.code)throw new Error(e.msg);var t=e.data&&e.data.result&&e.data.result.length?e.data.result.map(function(e){return{id:e.id,storeNo:e.storeNo,storeName:e.storeName}}):[];a.setState({tableData:t})}).catch(function(e){a.setState({loading:!1}),S.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message)})},a.handleOk=function(){var e=a.props.confirmHandel;a.setState({visible:!1}),e({storeNo:b.map(function(e){return e.storeNo}),storeName:b.map(function(e){return e.storeName}).join(",")})},a.handleCancel=function(){a.setState({visible:!1})},a.inputChange=function(e){a.setState(Object(l.a)({},e.target.name,e.target.value))},a.state={visible:!1,loading:!1,storeNo:"",storeName:"",tableData:[],vendorNo:e.vendorNo,venderOptions:e.venderOptions,defaultVal:e.defaultVal},a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e={onSelect:function(e,t,a){b=Object(i.a)(a)},onSelectAll:function(e,t,a){b=Object(i.a)(t)}},t=this.state.tableData,a=this.props,l=a.label,d=a.placeholder,c=a.className,m=void 0===c?"search-input":c,u=this.state.visible;return v.a.createElement(o.a.Item,{label:l},v.a.createElement(y,{placeholder:d||l,className:m,onSearch:this.onSearch.bind(this),value:this.state.defaultVal,enterButton:!0,readOnly:!0}),v.a.createElement(n.a,{title:"\u9009\u62e9\u95e8\u5e97",width:450,visible:u,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this)},v.a.createElement(f.a,{placeholder:"\u8f93\u5165\u5206\u5e97\u7f16\u53f7",allowClear:!0,name:"storeNo",className:"search-input-short",onChange:this.inputChange.bind(this),style:{marginRight:"10px"},onPressEnter:this.doSearchHandel.bind(this)}),v.a.createElement(f.a,{placeholder:"\u8f93\u5165\u5206\u5e97\u540d\u79f0",allowClear:!0,name:"storeName",className:"search-input-short",onChange:this.inputChange.bind(this),style:{marginRight:"10px"},onPressEnter:this.doSearchHandel.bind(this)}),v.a.createElement(s.a,{type:"primary",onClick:this.doSearchHandel.bind(this)},"\u67e5\u8be2"),v.a.createElement(r.a,{style:{marginTop:"10px"},rowKey:function(e){return e.id},pagination:!1,columns:[{title:"\u95e8\u5e97\u7f16\u53f7",dataIndex:"storeNo",key:"storeNo",width:120},{title:"\u95e8\u5e97\u540d\u79f0",dataIndex:"storeName",key:"storeName"}],rowSelection:e,dataSource:t,loading:this.state.loading,scroll:{y:250},size:"small"})))}},{key:"componentWillReceiveProps",value:function(e){this.setState({vendorNo:e.vendorNo,venderOptions:e.venderOptions,defaultVal:e.defaultVal})}}]),t}(p.Component);t.a=w},882:function(e,t,a){"use strict";a(273);var o=a(66),n=(a(893),a(892)),r=a(1),s=a.n(r),i=a(121),l=a.n(i);t.a=function(e){var t=e.label,a=e.name,r=e.formItemChange,i=e.className,d=void 0===i?"search-input":i,c=e.defaultVal,m=e.allowClear,u=c?l()(c,"YYYY-MM-DD"):null;return s.a.createElement(o.a.Item,{label:t},s.a.createElement(n.a,{placeholder:t,allowClear:m,name:a,className:d,onChange:function(e,t){r({name:a,value:t,doSearchHandel:!0})},defaultValue:u,value:u,format:"YYYY-MM-DD"}))}},887:function(e,t){},888:function(e,t){},890:function(e,t,a){"use strict";a(273);var o=a(66),n=(a(385),a(152)),r=a(1),s=a.n(r),i=n.a.Option;t.a=function(e){var t=e.label,a=e.defaultVal,r=e.optionsMap,l=e.name,d=e.formItemChange,c=e.className,m=void 0===c?"search-input":c,u=e.mode,h=e.maxTagCount,g=e.maxTagTextLength,f=e.placeholder,p=r.map(function(e,t){return s.a.createElement(i,{value:e.value,key:e.value},e.label)});return s.a.createElement(o.a.Item,{label:t},s.a.createElement(n.a,{maxTagCount:h,maxTagTextLength:g,mode:u,showSearch:!0,className:m,placeholder:f||t,value:a,name:l,onChange:function(e){d({name:l,value:e,doSearchHandel:!0})},dropdownMatchSelectWidth:!1},p))}},891:function(e,t,a){"use strict";var o=a(42),n={summaryByGoods:"".concat(o.a.reqUrlSupplier,"/supplier/a/vendorSale/summaryByGoods"),storeSale:"".concat(o.a.reqUrlSupplier,"/supplier/a/vendorSale/storeSale"),summaryGoodsEachStore:"".concat(o.a.reqUrlSupplier,"/supplier/a/vendorSale/summaryGoodsEachStore")};t.a=n},907:function(e,t,a){},915:function(e,t,a){"use strict";a.r(t);a(382);var o=a(275),n=(a(273),a(66)),r=(a(883),a(885)),s=(a(122),a(38)),i=(a(123),a(7)),l=(a(384),a(114)),d=a(80),c=a(124),m=a(29),u=a(30),h=a(27),g=a(31),f=a(161),p=a(32),v=(a(905),a(908)),N=a(1),S=a.n(N),y=a(198),b=(a(907),a(159)),w=a(891),E=a(878),x=a(59),C=a(33),L=a(880),D=a(890),A=(a(278),a(196)),O=(a(385),a(152)),I=O.a.Option,P=function(e){var t=e.label,a=e.defaultVal,o=e.formItemChange,r=e.className,s=void 0===r?"search-input":r,i=e.placeholder,l=e.optionsMap,d=e.doFetchHandel,c=e.fetchLoading;return S.a.createElement(n.a.Item,{label:t},S.a.createElement(O.a,{showSearch:!0,value:a,placeholder:i,notFoundContent:c?S.a.createElement(A.a,{size:"small"}):null,showArrow:!1,filterOption:!1,onSearch:function(e){(e=e.replace(/\s+/g,""))&&d(e)},onChange:function(e,t){if(t&&e){var a=t.props.value,n=t.props.children;o({goodsNo:a,goodsName:n,doSearchHandel:!1})}else o({goodsNo:"",goodsName:"",doSearchHandel:!1})},dropdownMatchSelectWidth:!1,className:s,allowClear:!0},l.map(function(e){return S.a.createElement(I,{key:e.value,value:e.value},e.label)})))},F=a(882),H=a(881),R=v.a.TabPane,j=document.body.clientHeight-146,k=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).formItemChange=function(e){a.setState(Object(c.a)({},e.name,e.value))},a.confirmHandel=function(e){a.setState({storeNoList:e.storeNo,storeName:e.storeName})},a.doFetchGoodsHandel=function(e){var t=a.state.vendorNoList&&a.state.vendorNoList.length>0?a.state.vendorNoList:a.state.venderOptions.map(function(e){return e.value}),o={pageNum:1,pageSize:-1,storeNoList:a.state.storeNo,vendorNoList:t,searchValue:e};a.setState({fetchLoading:!0,goodsOptions:[]}),a.$http.post(b.a.queryVendorGoodsPageList,Object(d.a)({},o)).then(function(e){if(a.setState({fetchLoading:!1}),0!==e.code)throw new Error(e.msg);var t=(e.data&&e.data.result&&e.data.result.length?e.data.result:[]).map(function(e){return{id:e.goodsId,value:e.goodsNo,label:e.goodsNoName}});a.setState({goodsOptions:t})}).catch(function(e){a.setState({fetchLoading:!1,goodsOptions:[]}),x.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})},a.selectAsyncHandel=function(e){a.setState({goodsNo:e.goodsNo,goodsName:e.goodsName})},a.tabsChange=function(e){a.setState({startDate:x.a.dateFormat("yyyy-MM-dd",Date.parse(new Date)-864e5),endDate:x.a.dateFormat("yyyy-MM-dd",Date.parse(new Date)),storeName:"",storeNoList:[],vendorNoList:[],fetchLoading:!1,goodsOptions:[],goodsName:void 0,goodsNo:"",goodsBarcode:"",vendorGoodsNo:"",contractNo:"",tableData:[],latestTime:"--",totalGrossProfitAmount:"--",totalSaleAmount:"--"},function(){1===parseInt(e)?a.doSearchHandel(!0):2===parseInt(e)&&a.doSearchHandelForStore(!0)})},a.doResetHandel=function(e){a.tabsChange(e)},a.getVenderList=function(){var e={requireVendorName:!0,userNo:C.a.get("loginInfo")?C.a.get("loginInfo").UserNO:""};a.$http.post(b.a.vendorList,Object(d.a)({},e)).then(function(e){if(0!==e.code)throw new Error(e.msg);var t=e.data&&e.data.length?e.data.map(function(e){return{id:e.vendorNo,value:e.vendorNo,label:e.vendorName}}):[];a.setState({venderOptions:t})}).catch(function(e){console.log("\u3010\u4f9b\u5e94\u5546\u63d0\u793a\u3011:",e.message)})},a.onPageSizeChange=function(e,t){a.setState({pageSize:t},function(){a.doSearchHandel()})},a.pageNumChange=function(e){a.setState({pageNum:e},function(){a.doSearchHandel()})},a.showTotal=function(){return"\u5171 ".concat(a.state.total," \u6761")},a.doSearchHandel=function(e){var t=a.state,o=t.startDate,n=t.endDate,r=t.storeNoList,s=t.vendorNoList,i=t.goodsNo,c=t.goodsBarcode,m=t.vendorGoodsNo,u=t.contractNo;if(Date.parse(new Date(o.replace(/-/g,"/")))>Date.parse(new Date(n.replace(/-/g,"/"))))l.a.warning("\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u65e9\u4e8e\u5f00\u59cb\u65f6\u95f4\uff01");else{a.setState({loading:!0});var h={startDate:o,endDate:n,storeNoList:r,vendorNoList:s,goodsNo:i,goodsBarcode:c,vendorGoodsNo:m,contractNo:u};a.$http.post(w.a.summaryByGoods,Object(d.a)({},h)).then(function(e){if(a.setState({loading:!1}),0!==e.code)throw new Error(e.msg);var t=e.data?e.data:{},o=(t.goodsList&&t.goodsList?t.goodsList:[]).map(function(e,t){return e.index=t+1,e.saleQty=e.saleQty?e.saleQty.toFixed(3):e.saleQty,e.saleAmount=e.saleAmount?e.saleAmount.toFixed(2):e.saleAmount,e.storeSaleRatio=e.storeSaleRatio?e.storeSaleRatio.toFixed(2):e.storeSaleRatio,e.grossProfitAmount=e.grossProfitAmount?e.grossProfitAmount.toFixed(2):e.grossProfitAmount,e});a.setState({latestTime:t.latestTime||"--",totalGrossProfitAmount:t.totalGrossProfitAmount?t.totalGrossProfitAmount.toFixed(2):"--",totalSaleAmount:t.totalSaleAmount?t.totalSaleAmount.toFixed(2):"--",tableData:o,total:t.total})}).catch(function(e){a.setState({loading:!1}),x.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})}},a.doSearchHandelForStore=function(e){var t=a.state,o=t.startDate,n=t.endDate,r=t.storeNoList,s=t.vendorNoList;if(Date.parse(new Date(o.replace(/-/g,"/")))>Date.parse(new Date(n.replace(/-/g,"/"))))l.a.warning("\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u65e9\u4e8e\u5f00\u59cb\u65f6\u95f4\uff01");else{a.setState({loading:!0});var i={startDate:o,endDate:n,storeNoList:r,vendorNoList:s};a.$http.post(w.a.storeSale,Object(d.a)({},i)).then(function(e){if(a.setState({loading:!1}),0!==e.code)throw new Error(e.msg);var t=e.data?e.data:{},o=(t.storeSaleList&&t.storeSaleList?t.storeSaleList:[]).map(function(e,t){return e.index=t+1,e.provinceName&&e.cityName?e.areaStr="".concat(e.provinceName,"-").concat(e.cityName):e.provinceName?e.areaStr="".concat(e.provinceName):e.cityName?e.areaStr="".concat(e.cityName):e.areaStr="-",e.storeSaleAmount=e.storeSaleAmount?e.storeSaleAmount.toFixed(2):"",e.storeSaleRatio=e.storeSaleRatio?e.storeSaleRatio.toFixed(2):e.storeSaleRatio,e.grossProfitAmount=e.grossProfitAmount?e.grossProfitAmount.toFixed(2):"",e});a.setState({latestTime:t.latestTime||"--",totalGrossProfitAmount:t.totalGrossProfitAmount?t.totalGrossProfitAmount.toFixed(2):"--",totalSaleAmount:t.totalSaleAmount?t.totalSaleAmount.toFixed(2):"--",tableData:o,total:t.total})}).catch(function(e){a.setState({loading:!1}),x.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})}},a.doExportDataHandel=function(){var e=a.state,t=e.startDate,o=e.endDate,n=e.storeNoList,r=e.vendorNoList,s=e.goodsNo,i=e.goodsBarcode,c=e.vendorGoodsNo,m=e.contractNo;if(Date.parse(new Date(t.replace(/-/g,"/")))>Date.parse(new Date(o.replace(/-/g,"/"))))l.a.warning("\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u65e9\u4e8e\u5f00\u59cb\u65f6\u95f4\uff01");else{a.setState({exportLoading:!0});var u={startDate:t,endDate:o,storeNoList:n,vendorNoList:r,goodsNo:s,goodsBarcode:i,vendorGoodsNo:c,contractNo:m,isReport:1};a.$http.post(w.a.summaryByGoods,Object(d.a)({},u)).then(function(e){if(a.setState({exportLoading:!1}),0!==e.code)throw new Error(e.msg);var n=e.data?e.data:{},r=(n.goodsList&&n.goodsList?n.goodsList:[]).map(function(e,t){return e.index=t+1,e.saleQty=e.saleQty?e.saleQty.toFixed(3):e.saleQty,e.saleAmount=e.saleAmount?e.saleAmount.toFixed(2):e.saleAmount,e.storeSaleRatio=e.storeSaleRatio?e.storeSaleRatio.toFixed(2):e.storeSaleRatio,e.grossProfitAmount=e.grossProfitAmount?e.grossProfitAmount.toFixed(2):e.grossProfitAmount,e});E.a.exportFileByConfig(r,"\u672c\u6765\u9c9c\u9500\u552e\u6570\u636e_".concat(t,"~").concat(o,".xlsx"),a.state.exportConfig)}).catch(function(e){a.setState({exportLoading:!1}),x.a.openNotification("error","\u7cfb\u7edf\u63d0\u793a",e.message||"")})}},a.doExportDataHandelForStore=function(){a.setState({exportLoading:!0});var e=a.state.tableData,t=a.state.startDate,o=a.state.endDate;e.length>0?(E.a.exportFileByConfig(e,"\u672c\u6765\u9c9c\u9500\u552e\u6570\u636e_".concat(t,"~").concat(o,".xlsx"),a.state.exportConfigForStore),a.setState({exportLoading:!1})):(x.a.openNotification("warning","\u7cfb\u7edf\u63d0\u793a","\u6ca1\u6709\u67e5\u8be2\u5230\u53ef\u5bfc\u51fa\u6570\u636e"),a.setState({exportLoading:!1}))},a.goDetailPage=function(e){var t=a.state,o={startDate:t.startDate,endDate:t.endDate,storeName:t.storeName,storeNoList:t.storeNoList,vendorNoList:t.vendorNoList,goodsName:t.goodsName,goodsNo:t.goodsNo,goodsBarcode:t.goodsBarcode,vendorGoodsNo:t.vendorGoodsNo,contractNo:t.contractNo};C.a.set("searchContent",o),a.props.history.push("/sale_search/".concat(e.goodsNo))},a.state={userPermissionMap:e.userPermissionMap||{},formLayout:"vertical",pageNum:1,pageSize:10,loading:!1,exportLoading:!1,total:0,startDate:x.a.dateFormat("yyyy-MM-dd",Date.parse(new Date)-864e5),endDate:x.a.dateFormat("yyyy-MM-dd",Date.parse(new Date)),storeName:"",storeNoList:[],vendorNoList:[],venderOptions:[],fetchLoading:!1,goodsOptions:[],goodsName:void 0,goodsNo:"",goodsBarcode:"",vendorGoodsNo:"",contractNo:"",columns:[{title:"\u5e8f\u53f7",dataIndex:"index",width:50},{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"goodsName",width:120},{title:"\u5546\u54c1\u7f16\u7801",dataIndex:"goodsNo",width:90},{title:"\u8d27\u53f7",dataIndex:"vendorGoodsNo",width:80},{title:"\u5546\u54c1\u6761\u7801",dataIndex:"goodsBarcode",width:80},{title:"\u5408\u540c\u7f16\u7801",dataIndex:"contractNo",width:110,render:function(e){return S.a.createElement("div",{style:{wordWrap:"break-word",wordBreak:"break-word"}},e)}},{title:"\u89c4\u683c",dataIndex:"spec",width:60},{title:"\u5355\u4f4d",dataIndex:"saleUnit",width:60},{title:"\u9500\u552e\u91cf+\u8d60\u54c1",dataIndex:"saleQty",width:120,sorter:function(e,t){return e.saleQty-t.saleQty}},{title:"\u9500\u552e\u989d",dataIndex:"saleAmount",width:100,sorter:function(e,t){return e.saleAmount-t.saleAmount}},{title:"\u9500\u552e\u5360\u6bd4",dataIndex:"saleRatio",width:100,sorter:function(e,t){return e.saleRatio-t.saleRatio}},{title:"\u53c2\u8003\u6bdb\u5229\u989d",dataIndex:"grossProfitAmount",sorter:function(e,t){return e.grossProfitAmount-t.grossProfitAmount}},{title:"\u64cd\u4f5c",fixed:"right",width:100,render:function(e){return S.a.createElement(s.a,{type:"link",onClick:a.goDetailPage.bind(Object(f.a)(a),e)},S.a.createElement(i.a,{type:"eye"}),"\u6309\u95e8\u5e97\u67e5\u770b")}}],columnsForStore:[{title:"\u5e8f\u53f7",dataIndex:"index",width:60},{title:"\u95e8\u5e97\u540d\u79f0",dataIndex:"storeName",width:130},{title:"\u6240\u5728\u533a\u57df",dataIndex:"areaStr",width:130},{title:"\u9500\u552e\u989d",dataIndex:"storeSaleAmount",width:130,sorter:function(e,t){return e.storeSaleAmount-t.storeSaleAmount}},{title:"\u9500\u552e\u5360\u6bd4",dataIndex:"storeSaleRatio",width:130,sorter:function(e,t){return e.storeSaleRatio-t.storeSaleRatio}},{title:"\u53c2\u8003\u6bdb\u5229\u989d",dataIndex:"grossProfitAmount",width:130,sorter:function(e,t){return e.grossProfitAmount-t.grossProfitAmount}}],tableData:[],latestTime:"--",totalGrossProfitAmount:"--",totalSaleAmount:"--",exportConfig:{index:"\u5e8f\u53f7",goodsName:"\u5546\u54c1\u540d\u79f0",goodsNo:"\u5546\u54c1\u7f16\u7801",vendorGoodsNo:"\u8d27\u53f7",goodsBarcode:"\u5546\u54c1\u6761\u7801",contractNo:"\u5408\u540c\u7f16\u7801",spec:"\u89c4\u683c",saleUnit:"\u5355\u4f4d",saleQty:"\u9500\u552e\u91cf+\u8d60\u54c1",saleAmount:"\u9500\u552e\u989d",saleRatio:"\u9500\u552e\u5360\u6bd4",grossProfitAmount:"\u53c2\u8003\u6bdb\u5229\u989d"},exportConfigForStore:{index:"\u5e8f\u53f7",storeName:"\u95e8\u5e97\u540d\u79f0",areaStr:"\u6240\u5728\u533a\u57df",storeSaleAmount:"\u9500\u552e\u989d",storeSaleRatio:"\u9500\u552e\u5360\u6bd4",grossProfitAmount:"\u6bdb\u5229\u989d"}},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getVenderList();var t=C.a.get("searchContent");t?this.setState(Object(d.a)({},t),function(){e.doSearchHandel()}):this.doSearchHandel()}},{key:"render",value:function(){var e=this.props.location,t=this.state.userPermissionMap[e.pathname],a=this.state,l=a.columns,d=a.columnsForStore,c=a.tableData,m=a.latestTime,u=a.totalGrossProfitAmount,h=a.totalSaleAmount,g=S.a.createElement("div",{style:{maxWidth:300}},S.a.createElement("div",null,"\u53c2\u8003\u6bdb\u5229\u989d\uff1a\u8054\u8425\u5546\u54c1\u7684\u6bcf\u4e2a\u95e8\u5e97\u7684\u9500\u552e\u989d\u51cf\u53bb\u5bf9\u5e94\u7684\u6263\u70b9\u91d1\u989d\uff08\u9500\u552e\u989d*\u95e8\u5e97\u8d39\u7387\uff09\u4e4b\u548c\uff0c\u4ee5\u6bcf\u9636\u6bb5\u7684\u5b9e\u9645\u6263\u70b9\u8ba1\u7b97\uff1b"),S.a.createElement("div",null,"\u9500\u552e\u989d\uff1a\u4ec5\u663e\u793a\u8054\u8425\u7c7b\u578b\u7684\u5546\u54c1\u9500\u552e\u989d\uff1b"),S.a.createElement("div",null,"\u9500\u552e\u5360\u6bd4\uff1a\u8be5\u5546\u54c1\u9500\u552e\u989d\u5360\u603b\u9500\u552e\u989d\u7684\u5360\u6bd4\uff1b")),f=S.a.createElement("div",{style:{maxWidth:300}},S.a.createElement("div",null,"\u53c2\u8003\u6bdb\u5229\u989d\uff1a\u8054\u8425\u5546\u54c1\u7684\u6bcf\u4e2a\u95e8\u5e97\u7684\u9500\u552e\u989d\u51cf\u53bb\u5bf9\u5e94\u7684\u6263\u70b9\u91d1\u989d\uff08\u9500\u552e\u989d*\u95e8\u5e97\u8d39\u7387\uff09\u4e4b\u548c\uff0c\u4ee5\u6bcf\u9636\u6bb5\u7684\u5b9e\u9645\u6263\u70b9\u8ba1\u7b97\uff1b"));return S.a.createElement("div",{className:"main-container"},t?S.a.createElement(v.a,{onChange:this.tabsChange,type:"card"},t.includes("\u6c47\u603b")?S.a.createElement(R,{tab:"\u6c47\u603b",key:"1"},S.a.createElement("div",{className:"search-wraper"},S.a.createElement(n.a,{layout:this.state.formLayout},S.a.createElement(F.a,{label:"\u5355\u636e\u5f00\u59cb\u65f6\u95f4",defaultVal:this.state.startDate,name:"startDate",formItemChange:this.formItemChange,allowClear:!1}),S.a.createElement(F.a,{label:"\u5355\u636e\u7ed3\u675f\u65f6\u95f4",defaultVal:this.state.endDate,name:"endDate",formItemChange:this.formItemChange,allowClear:!1}),S.a.createElement(D.a,{label:"\u4f9b\u5e94\u5546",placeholder:"\u9009\u62e9\u4f9b\u5e94\u5546",mode:"multiple",name:"vendorNoList",maxTagCount:1,maxTagTextLength:2,defaultVal:this.state.vendorNoList,optionsMap:this.state.venderOptions,formItemChange:this.formItemChange}),S.a.createElement(H.a,{label:"\u95e8\u5e97",placeholder:"\u70b9\u51fb\u9009\u62e9\u95e8\u5e97",vendorNo:this.state.vendorNoList,venderOptions:this.state.venderOptions,confirmHandel:this.confirmHandel,defaultVal:this.state.storeName}),S.a.createElement(P,{label:"\u5546\u54c1\u540d\u79f0\u6216\u7f16\u7801",placeholder:"\u5546\u54c1\u540d\u79f0\u6216\u7f16\u7801",name:"goodsNo",defaultVal:this.state.goodsName,optionsMap:this.state.goodsOptions,doFetchHandel:this.doFetchGoodsHandel,fetchLoading:this.state.fetchLoading,formItemChange:this.selectAsyncHandel}),S.a.createElement(L.a,{label:"\u5546\u54c1\u6761\u7801",name:"goodsBarcode",defaultVal:this.state.goodsBarcode,formItemChange:this.formItemChange}),S.a.createElement(L.a,{label:"\u8d27\u53f7",name:"vendorGoodsNo",defaultVal:this.state.vendorGoodsNo,formItemChange:this.formItemChange}),S.a.createElement(L.a,{label:"\u5408\u540c\u7f16\u7801",name:"contractNo",defaultVal:this.state.contractNo,formItemChange:this.formItemChange}),S.a.createElement(n.a.Item,{className:"btn-wrap",label:"\xa0 "},S.a.createElement(s.a,{type:"primary",onClick:this.doSearchHandel.bind(this,!0)},S.a.createElement(i.a,{type:"search"}),"\u67e5\u8be2"),S.a.createElement(s.a,{onClick:this.doResetHandel.bind(this,1)},S.a.createElement(i.a,{type:"reload"}),"\u91cd\u7f6e"),S.a.createElement(r.a,{content:"\u6bcf\u6b21\u6700\u591a\u53ef\u5bfc\u51fa2000\u6761\u6570\u636e",trigger:"hover"},S.a.createElement(s.a,{onClick:this.doExportDataHandel.bind(this),disabled:this.state.exportLoading},this.state.exportLoading?S.a.createElement(i.a,{type:"loading"}):S.a.createElement(i.a,{type:"download"}),"\u5bfc\u51fa"))))),S.a.createElement("hr",{className:"s-slip"}),S.a.createElement("div",{className:"operation-wraper"},S.a.createElement("span",null,"\u603b\u9500\u552e\u989d\uff1a\uffe5",h),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",S.a.createElement("span",null,"\u6bdb\u5229\u989d\uff1a\uffe5",u),S.a.createElement("div",{style:{float:"right"}},S.a.createElement(r.a,{content:g,trigger:"hover",title:"\u8868\u683c\u5b57\u6bb5\u8bf4\u660e",placement:"topRight"},S.a.createElement(i.a,{type:"question-circle"}),"\u5e2e\u52a9"))),S.a.createElement("div",{className:"content-wraper"},S.a.createElement(o.a,{loading:this.state.loading,rowKey:function(e){return"".concat(e.contractNo).concat(e.vendorNo).concat(e.goodsNo).concat(e.storeNo)},columns:l,dataSource:c,size:"middle",pagination:!1,scroll:{x:1200,y:j}})),S.a.createElement("div",{className:"last-time-wraper"},"\u6570\u636e\u66f4\u65b0\u65f6\u95f4\uff1a",m)):null,t.includes("\u95e8\u5e97\u6c47\u603b")?S.a.createElement(R,{tab:"\u95e8\u5e97\u6c47\u603b",key:"2"},S.a.createElement("div",{className:"search-wraper"},S.a.createElement(n.a,{layout:this.state.formLayout},S.a.createElement(F.a,{label:"\u5355\u636e\u5f00\u59cb\u65f6\u95f4",defaultVal:this.state.startDate,name:"startDate",formItemChange:this.formItemChange,allowClear:!1}),S.a.createElement(F.a,{label:"\u5355\u636e\u7ed3\u675f\u65f6\u95f4",defaultVal:this.state.endDate,name:"endDate",formItemChange:this.formItemChange,allowClear:!1}),S.a.createElement(D.a,{label:"\u4f9b\u5e94\u5546",placeholder:"\u9009\u62e9\u4f9b\u5e94\u5546",mode:"multiple",name:"vendorNoList",maxTagCount:1,maxTagTextLength:2,defaultVal:this.state.vendorNoList,optionsMap:this.state.venderOptions,formItemChange:this.formItemChange}),S.a.createElement(H.a,{label:"\u95e8\u5e97",placeholder:"\u70b9\u51fb\u9009\u62e9\u95e8\u5e97",vendorNo:this.state.vendorNoList,venderOptions:this.state.venderOptions,confirmHandel:this.confirmHandel,defaultVal:this.state.storeName}),S.a.createElement(n.a.Item,{className:"btn-wrap",label:"\xa0 "},S.a.createElement(s.a,{type:"primary",onClick:this.doSearchHandelForStore.bind(this,!0)},S.a.createElement(i.a,{type:"search"}),"\u67e5\u8be2"),S.a.createElement(s.a,{onClick:this.doResetHandel.bind(this,2)},S.a.createElement(i.a,{type:"reload"}),"\u91cd\u7f6e"),S.a.createElement(r.a,{content:"\u6bcf\u6b21\u6700\u591a\u53ef\u5bfc\u51fa2000\u6761\u6570\u636e",trigger:"hover"},S.a.createElement(s.a,{onClick:this.doExportDataHandelForStore.bind(this),disabled:this.state.exportLoading||0===this.state.tableData.length},this.state.exportLoading?S.a.createElement(i.a,{type:"loading"}):S.a.createElement(i.a,{type:"download"}),"\u5bfc\u51fa"))))),S.a.createElement("hr",{className:"s-slip"}),S.a.createElement("div",{className:"operation-wraper"},S.a.createElement("span",null,"\u603b\u9500\u552e\u989d\uff1a\uffe5",h),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",S.a.createElement("span",null,"\u6bdb\u5229\u989d\uff1a\uffe5",u),S.a.createElement("div",{style:{float:"right"}},S.a.createElement(r.a,{content:f,trigger:"hover",title:"\u8868\u683c\u5b57\u6bb5\u8bf4\u660e",placement:"topRight"},S.a.createElement(i.a,{type:"question-circle"}),"\u5e2e\u52a9"))),S.a.createElement("div",{className:"content-wraper"},S.a.createElement(o.a,{loading:this.state.loading,rowKey:function(e){return"".concat(e.index).concat(e.storeNo)},columns:d,dataSource:c,size:"middle",pagination:!1,scroll:{x:720,y:j}})),S.a.createElement("div",{className:"last-time-wraper"},"\u6570\u636e\u66f4\u65b0\u65f6\u95f4\uff1a",m)):null):null)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.userPermissionMap&&this.setState({userPermissionMap:e.userPermissionMap})}}]),t}(N.Component);t.default=Object(y.b)(function(e){return{userPermissionMap:e.userPermission.userPermissionMap}},{})(k)}}]);
//# sourceMappingURL=5.2afbd51e.chunk.js.map