{"version":3,"sources":["utils/exportSheet.js","components/Common/SearchForm/BlInput.js","components/Common/SearchForm/BlSelectModelStoreTable.js","components/Common/SearchForm/BlDatePicker.js","components/Common/SearchForm/BlSelect.js","api/saleSearchUrl.js","components/Common/SearchForm/BlSelectAsync.js","components/SaleSearch/index.js"],"names":["s2ab","s","ArrayBuffer","buf","length","view","Uint8Array","i","charCodeAt","Array","getCharCol","n","m","String","fromCharCode","createFile","json","fileName","extraList","_tmpdata","unshift","keyMap","k","push","tmpdata","map","v","j","Object","assign","position","reduce","prev","next","concat","forEach","temObj","item","label","value","outputPos","keys","tmpWB","SheetNames","Sheets","mySheet","!ref","wbout","XLSX","write","bookType","type","tmpDown","Blob","href","URL","createObjectURL","a","document","createElement","download","body","appendChild","click","removeChild","setTimeout","revokeObjectURL","__webpack_exports__","exportFile","exportConfig","extraData","arguments","undefined","index","newItem","_i3","_Object$keys2","exportFileByConfig","_i2","_Object$keys","toJSON","excelFile","config","Promise","resolve","reject","window","FileReader","result","fr","readAsBinaryString","onload","ev","data","target","workbook","read","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","sheet","utils","sheet_to_json","err","return","e","Error","parseToJSON","setter","name","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","defval","key","BlInput","props","defaultVal","formItemChange","_props$className","className","react__WEBPACK_IMPORTED_MODULE_4___default","antd_es_form__WEBPACK_IMPORTED_MODULE_1__","Item","antd_es_input__WEBPACK_IMPORTED_MODULE_3__","placeholder","allowClear","onChange","doSearchHandel","Search","checkedList","BlSelectModelStoreTable","_this","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_11__","this","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_13__","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_14__","call","onSearch","setState","visible","vendorNoListTemp","state","vendorNo","venderOptions","params","pageNum","pageSize","storeNo","storeName","vendorNoList","loading","$http","post","commonUrl","queryVendorStore","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_10__","then","res","code","msg","tableDataArr","id","tableData","catch","openNotification","message","handleOk","confirmHandel","join","handleCancel","inputChange","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_9__","rowSelection","onSelect","record","selected","selectedRows","F_Work_BLX_Vendor_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__","onSelectAll","changeRows","_this$props","_this$props$className","react__WEBPACK_IMPORTED_MODULE_18___default","bind","enterButton","readOnly","antd_es_modal__WEBPACK_IMPORTED_MODULE_3__","title","width","onOk","onCancel","antd_es_input__WEBPACK_IMPORTED_MODULE_17__","style","marginRight","onPressEnter","antd_es_button__WEBPACK_IMPORTED_MODULE_7__","onClick","antd_es_table__WEBPACK_IMPORTED_MODULE_5__","marginTop","rowKey","pagination","columns","dataIndex","dataSource","scroll","y","size","nextProps","Component","BlSelect","defaultValMsg","moment","antd_es_date_picker__WEBPACK_IMPORTED_MODULE_3__","date","dateString","defaultValue","format","Option","antd_es_select__WEBPACK_IMPORTED_MODULE_3__","optionsMap","mode","maxTagCount","maxTagTextLength","$optionEl","showSearch","dropdownMatchSelectWidth","_utils_config__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","saleSearchUrl","summaryByGoods","reqUrlSupplier","storeSale","summaryGoodsEachStore","es_select","doFetchHandel","fetchLoading","_react_16_9_0_react_default","es_form","notFoundContent","spin","showArrow","filterOption","replace","selectKey","selectKeyNode","goodsNo","goodsName","children","TabPane","yVal","clientHeight","SearchOrder","classCallCheck","possibleConstructorReturn","getPrototypeOf","defineProperty","storeNoList","doFetchGoodsHandel","searchValue","goodsOptions","queryVendorGoodsPageList","objectSpread","goodsListTemp","goodsId","goodsNoName","selectAsyncHandel","tabsChange","startDate","dateFormat","Date","parse","endDate","goodsBarcode","vendorGoodsNo","contractNo","latestTime","totalGrossProfitAmount","totalSaleAmount","parseInt","doSearchHandelForStore","doResetHandel","param","getVenderList","requireVendorName","userNo","Storage","get","UserNO","vendorList","venderOptionsArr","vendorName","console","log","onPageSizeChange","current","pageNumChange","pageNumber","showTotal","total","_this$state","warning","_params","resultVal","tableDataListTemp","goodsList","idx","saleQty","toFixed","saleAmount","storeSaleRatio","grossProfitAmount","_this$state2","storeSaleList","provinceName","cityName","areaStr","storeSaleAmount","doExportDataHandel","_this$state3","exportLoading","isReport","exportSheet","doExportDataHandelForStore","exportConfigForStore","goDetailPage","_row","_this$state4","searchContent","set","history","userPermissionMap","formLayout","render","text","wordWrap","wordBreak","sorter","b","saleRatio","fixed","es_button","assertThisInitialized","icon","columnsForStore","spec","saleUnit","_this2","searchContentMsg","location","userPermission","pathname","_this$state5","contentTabOne","maxWidth","contentTabTwo","tabs","includes","tab","layout","BlDatePicker","SearchForm_BlSelect","BlSelectAsync","popover","content","trigger","disabled","float","placement","table","x","connect"],"mappings":"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","file":"static/js/5.2afbd51e.chunk.js","sourcesContent":["import XLSX from 'xlsx'\r\n// js导出execl\r\nfunction s2ab (s) {\r\n  if (typeof ArrayBuffer !== 'undefined') {\r\n    let buf = new ArrayBuffer(s.length)\r\n    let view = new Uint8Array(buf)\r\n    for (let i = 0; i !== s.length; ++i) {\r\n      view[i] = s.charCodeAt(i) & 0xFF\r\n    }\r\n    return buf\r\n  } else {\r\n    let buf = new Array(s.length)\r\n    for (let i = 0; i !== s.length; ++i) {\r\n      buf[i] = s.charCodeAt(i) & 0xFF\r\n    }\r\n    return buf\r\n  }\r\n}\r\n\r\n// 将指定的自然数转换为26进制表示。映射关系：[0-25] -> [A-Z]。\r\nfunction getCharCol (n) {\r\n  let s = ''\r\n  let m = 0\r\n  while (n > 0) {\r\n    m = n % 26 + 1\r\n    s = String.fromCharCode(m + 64) + s\r\n    n = (n - m) / 26\r\n  }\r\n  return s\r\n}\r\n\r\nfunction exportFileByConfig (json, fileName, exportConfig, extraData = [[]]) {\r\n  if (exportConfig) {\r\n    json = json.map((item, index) => {\r\n      let newItem = {}\r\n      for (let k of Object.keys(exportConfig)) {\r\n        let value = item[k]\r\n        if (value === true) {\r\n          value = '是'\r\n        }\r\n        if (value === false) {\r\n          value = '否'\r\n        }\r\n        if (value === null || value === undefined) {\r\n          value = ''\r\n        }\r\n        newItem[exportConfig[k]] = value\r\n      }\r\n      return newItem\r\n    })\r\n  }\r\n  createFile(json, fileName, extraData)\r\n}\r\n\r\n// 建议使用exportFileByConfig方法，可以控制顺序\r\nfunction exportFile (json, fileName, exportConfig, extraData = [[]]) {\r\n  if (exportConfig) {\r\n    json = json.map((item, index) => {\r\n      let newItem = {}\r\n      // 设置导出的表头名称\r\n      for (let k of Object.keys(item)) {\r\n        if (!(k in exportConfig)) {\r\n          // newItem[k] = item[k] === null ? '' : (item[k] === true ? '是' : '否')  //将本句注释取消可将未配置字段也导出\r\n          continue\r\n        }\r\n        let value = item[k]\r\n        if (value === true) {\r\n          value = '是'\r\n        }\r\n        if (value === false) {\r\n          value = '否'\r\n        }\r\n        if (value === null || value === undefined) {\r\n          value = ''\r\n        }\r\n        newItem[exportConfig[k]] = value\r\n      }\r\n      return newItem\r\n    })\r\n  }\r\n  createFile(json, fileName, extraData)\r\n}\r\n\r\n/**\r\n *\r\n * @param json\r\n * @param fileName 名字.xlsx\r\n * @param extraList [[label: '', value: ''],[label: '', value: ''],[label: '', value: '']]\r\n */\r\nfunction createFile (json, fileName, extraList) {\r\n  let _tmpdata = json[0]\r\n  json.unshift({})\r\n  var keyMap = [] // 获取keys\r\n  for (var k in _tmpdata) {\r\n    keyMap.push(k)\r\n    json[0][k] = k\r\n  }\r\n  let tmpdata = [] // 用来保存转换好的json\r\n  json.map((v, i) => keyMap.map((k, j) => Object.assign({}, {\r\n    v: v[k],\r\n    // position: (j > 25 ? getCharCol(j) : String.fromCharCode(65 + j)) + (i + 1 + extraList.length) // 开头加个空行\r\n    position: (j > 25 ? getCharCol(j) : String.fromCharCode(65 + j)) + (i + extraList.length)\r\n  }))).reduce((prev, next) => prev.concat(next)).forEach((v, i) => {\r\n    tmpdata[v.position] = {\r\n      v: v.v\r\n    }\r\n  })\r\n  let temObj = {}\r\n  for (let i = 0; i < extraList.length; i++) {\r\n    let item = extraList[i]\r\n    for (let j = 0; j < item.length; j++) {\r\n      let key = String.fromCharCode(65 + i) + (j + 1)\r\n      temObj[key] = {v: item[j].label + ':' + item[j].value}\r\n    }\r\n  }\r\n  tmpdata = Object.assign(temObj, tmpdata)\r\n  var outputPos = Object.keys(tmpdata) // 设置区域,比如表格从A1到D10\r\n  var tmpWB = {\r\n    SheetNames: ['mySheet'], // 保存的表标题\r\n    Sheets: {\r\n      'mySheet': Object.assign({},\r\n        tmpdata, // 内容\r\n        {\r\n          '!ref': 'A1:' + outputPos[outputPos.length - 1] // 设置填充区域\r\n        })\r\n    }\r\n  }\r\n  let wbout = XLSX.write(tmpWB, {bookType: 'xlsx', type: 'binary'})\r\n  /* force a download */\r\n  let tmpDown = new Blob([s2ab(wbout)], {type: 'application/octet-stream'})\r\n  var href = URL.createObjectURL(tmpDown) // 创建对象超链接\r\n  var a = document.createElement('a')\r\n  a.href = href // 绑定a标签\r\n  a.download = fileName || `导出数据.xlsx`\r\n  document.body.appendChild(a)\r\n  a.click() // 模拟点击实现下载\r\n  document.body.removeChild(a)\r\n  setTimeout(function () { // 延时释放\r\n    URL.revokeObjectURL(tmpDown) // 用URL.revokeObjectURL()来释放这个object URL\r\n  }, 100)\r\n}\r\n\r\nfunction toJSON (excelFile, config) {\r\n  return new Promise((resolve, reject) => {\r\n    if (window.FileReader) {\r\n      let result = []\r\n      let fr = new FileReader()\r\n      fr.readAsBinaryString(excelFile)\r\n      fr.onload = ev => {\r\n        try {\r\n          let data = ev.target.result\r\n          // 以二进制形式读取excel文件\r\n          let workbook = XLSX.read(data, {\r\n            type: 'binary'\r\n          })\r\n          // 遍历每个表\r\n          for (let sheet of workbook.SheetNames) {\r\n            if (workbook.Sheets[sheet]) {\r\n              // 修改field配置\r\n              result = config ? result.concat(XLSX.utils.sheet_to_json(workbook.Sheets[sheet], config)) : result.concat(XLSX.utils.sheet_to_json(workbook.Sheets[sheet]))\r\n            }\r\n          }\r\n          resolve(result)\r\n        } catch (e) {\r\n          return reject(new Error(\"文件类型不正确\"))\r\n        }\r\n      }\r\n      return\r\n    }\r\n    reject(new Error(\"该浏览器不支持该功能，请更换或升级浏览器\"))\r\n  })\r\n}\r\n\r\n/*\r\n *  @excelFile File\r\n *  @config Object 解析字段\r\n *  @setter Object XLSX.utils.sheet_to_json的配置\r\n*/\r\nfunction parseToJSON (excelFile, config, setter = {}) {\r\n  return new Promise((resolve, reject) => {\r\n    if (window.FileReader) {\r\n      let result = []\r\n      let fr = new FileReader()\r\n      fr.readAsBinaryString(excelFile)\r\n      fr.onload = ev => {\r\n        try {\r\n          let data = ev.target.result\r\n          // 以二进制形式读取excel文件\r\n          let workbook = XLSX.read(data, {\r\n            type: 'binary'\r\n          })\r\n          // 只遍历第一个表\r\n          let name = workbook.SheetNames[0]\r\n          let sheet = workbook.Sheets[name]\r\n          if (sheet) {\r\n            result = XLSX.utils.sheet_to_json(sheet, {defval: '', ...setter})\r\n            if (config) {\r\n              result.forEach(item => {\r\n                for (let key in item) {\r\n                  if (config[key]) {\r\n                    item[config[key]] = item[key]\r\n                    delete item[key]\r\n                  }\r\n                }\r\n              })\r\n            }\r\n          }\r\n          resolve(result)\r\n        } catch (e) {\r\n          reject(new Error(\"文件类型不正确\"))\r\n        }\r\n      }\r\n      return\r\n    }\r\n    reject(new Error(\"该浏览器不支持该功能，请更换或升级浏览器\"))\r\n  })\r\n}\r\n\r\nexport default {\r\n  exportFile,\r\n  exportFileByConfig,\r\n  toJSON,\r\n  parseToJSON\r\n}\r\n\r\n","import React from 'react';\r\nimport {Form, Input} from 'antd';\r\n/**\r\n * @description: 结合ant通用的输入框\r\n * @param {label} 输入框顶部提示\r\n * @param {defaultVal} 输入框默认值\r\n * @param {optionsMap} 输入框options内容\r\n * @param {name} 输入框对应的字段名称\r\n * @param {formItemChange} 输入框选择数据发生变化对应的事件\r\n * @param {className} 输入框对应类名 默认值search-input\r\n * @return: \r\n */\r\nconst BlInput = props => {\r\n  let {label, defaultVal, name, formItemChange, className: className = 'search-input'} = props\r\n  const onChange = (e) => {\r\n    formItemChange({name: name, value: e.target.value, doSearchHandel: false})\r\n  }\r\n  return <Form.Item label={label}>\r\n    <Input placeholder={label} allowClear name={name} className={className} value={defaultVal} onChange={onChange}/>\r\n  </Form.Item>\r\n}\r\nexport default BlInput;","import React, { Component } from 'react';\r\nimport {Form, Input, Modal, Table, Button } from 'antd';\r\nimport commonUrl from '../../../api/commonUrl'\r\nimport utils from '../../../utils/utils'\r\nconst { Search } = Input;\r\n\r\nlet checkedList = []\r\nclass BlSelectModelStoreTable extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      visible: false,\r\n      loading: false,\r\n      storeNo: '',\r\n      storeName: '',\r\n      tableData: [],\r\n      vendorNo: props.vendorNo,\r\n      venderOptions: props.venderOptions,\r\n      defaultVal: props.defaultVal\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const rowSelection = {\r\n      onSelect: (record, selected, selectedRows) => {\r\n        checkedList = [...selectedRows]\r\n      },\r\n      onSelectAll: (selected, selectedRows, changeRows) => {\r\n        checkedList = [...selectedRows]\r\n      }\r\n    }\r\n    const columns = [\r\n      {\r\n        title: '门店编号',\r\n        dataIndex: 'storeNo',\r\n        key: 'storeNo',\r\n        width: 120,\r\n      },\r\n      {\r\n        title: '门店名称',\r\n        dataIndex: 'storeName',\r\n        key: 'storeName',\r\n      },\r\n    ];\r\n    const data = this.state.tableData;\r\n\r\n    let {label, placeholder, className: className = 'search-input'} = this.props\r\n    let visible = this.state.visible\r\n    return (\r\n      <Form.Item label={label}>\r\n        <Search placeholder={placeholder || label} className={className} onSearch={this.onSearch.bind(this)} value={this.state.defaultVal} enterButton readOnly/>\r\n        <Modal\r\n          title=\"选择门店\"\r\n          width={450}\r\n          visible={visible}\r\n          onOk={this.handleOk.bind(this)}\r\n          onCancel={this.handleCancel.bind(this)}\r\n        >\r\n          <Input placeholder=\"输入分店编号\" allowClear name=\"storeNo\" className=\"search-input-short\" onChange={this.inputChange.bind(this)} style={{\"marginRight\": '10px'}} onPressEnter={this.doSearchHandel.bind(this)}/>\r\n          <Input placeholder=\"输入分店名称\" allowClear name=\"storeName\" className=\"search-input-short\" onChange={this.inputChange.bind(this)} style={{\"marginRight\": '10px'}} onPressEnter={this.doSearchHandel.bind(this)}/>\r\n          <Button type=\"primary\" onClick={this.doSearchHandel.bind(this)}>查询</Button>\r\n          <Table\r\n            style={{marginTop: '10px'}} \r\n            rowKey={item => item.id}\r\n            pagination={false} \r\n            columns={columns} \r\n            rowSelection={rowSelection}\r\n            dataSource={data} \r\n            loading={this.state.loading}\r\n            scroll={{ y: 250 }}\r\n            size=\"small\"/>\r\n        </Modal>\r\n      </Form.Item>\r\n    )\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    // console.log(\"nextProps:\", nextProps)\r\n    this.setState({\r\n      vendorNo: nextProps.vendorNo,\r\n      venderOptions: nextProps.venderOptions,\r\n      defaultVal: nextProps.defaultVal\r\n    })\r\n  }\r\n\r\n  onSearch = () => {\r\n    this.setState({\r\n      visible: true\r\n    });\r\n    this.doSearchHandel()\r\n  }\r\n\r\n  doSearchHandel = () => {\r\n    let vendorNoListTemp = this.state.vendorNo && this.state.vendorNo.length > 0 ? this.state.vendorNo : this.state.venderOptions.map(item => {\r\n      return item.value\r\n    })\r\n    let params = {\r\n      pageNum: 1,\r\n      pageSize: -1,\r\n      storeNo: this.state.storeNo,\r\n      storeName: this.state.storeName\r\n    }\r\n    if(vendorNoListTemp && vendorNoListTemp.length) {\r\n      params.vendorNoList = vendorNoListTemp\r\n    }\r\n    this.setState({\r\n      loading: true\r\n    });\r\n    this.$http.post(commonUrl.queryVendorStore, {...params}).then(res => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      if(res.code === 0) {\r\n        let tableDataArr = res.data && res.data.result && res.data.result.length ? res.data.result.map(item => {\r\n          let newItem = {\r\n            id: item.id,\r\n            storeNo: item.storeNo,\r\n            storeName: item.storeName\r\n          }\r\n          return newItem;\r\n        }) : [] \r\n        this.setState({\r\n          tableData: tableDataArr\r\n        })\r\n        return\r\n      }\r\n      throw new Error(res.msg)\r\n    }).catch(e => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      utils.openNotification('error', '系统提示', e.message)\r\n    })\r\n  }\r\n\r\n  handleOk = () => {\r\n    let {confirmHandel} = this.props\r\n    this.setState({\r\n      visible: false\r\n    });\r\n    let storeNoList = checkedList.map(item => {\r\n      return item.storeNo\r\n    })\r\n    let storeNameStr = checkedList.map(item => {\r\n      return item.storeName\r\n    }).join(',')\r\n    confirmHandel({\r\n      storeNo: storeNoList,\r\n      storeName: storeNameStr\r\n    })\r\n  }\r\n\r\n  handleCancel = () => {\r\n    this.setState({\r\n      visible: false\r\n    });\r\n  }\r\n\r\n  inputChange = (e) => {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n}\r\n\r\nexport default BlSelectModelStoreTable;","import React from 'react';\r\nimport {Form, DatePicker } from 'antd';\r\nimport moment from 'moment';\r\nconst dateFormat = 'YYYY-MM-DD';\r\n\r\n/**\r\n * @description: 结合ant通用的日期选择框\r\n * @return: \r\n */\r\nconst BlSelect = props => {\r\n  let {label, name, formItemChange, className: className = 'search-input', defaultVal, allowClear} = props\r\n  let defaultValMsg = defaultVal ? moment(defaultVal, dateFormat) : null\r\n  const onChange = (date, dateString) => {\r\n    formItemChange({name: name, value: dateString, doSearchHandel: true})\r\n  }\r\n  return <Form.Item label={label}>\r\n    <DatePicker placeholder={label} allowClear={allowClear} name={name} className={className} onChange={onChange} defaultValue={defaultValMsg} value={defaultValMsg} format={dateFormat} />\r\n  </Form.Item>\r\n}\r\nexport default BlSelect;","import React from 'react';\r\nimport {Form, Select} from 'antd';\r\nconst Option = Select.Option;\r\n\r\n/**\r\n * @description: 结合ant通用的下拉选择框\r\n * @param {label} 选择框顶部提示\r\n * @param {defaultVal} 选择框默认值\r\n * @param {optionsMap} 选择框options内容\r\n * @param {name} 选择框对应的字段名称\r\n * @param {formItemChange} 选择框选择数据发生变化对应的事件\r\n * @param {className} 选择框对应类名 默认值search-input\r\n * @return: \r\n */\r\nconst BlSelect = props => {\r\n  let {label, defaultVal, optionsMap, name, formItemChange, className: className = 'search-input', mode, maxTagCount, maxTagTextLength, placeholder} = props\r\n  let $optionEl = optionsMap.map((item, index) => {\r\n    return <Option value={item.value} key={item.value}>{item.label}</Option>\r\n  })\r\n  const onChange = (e) => {\r\n    formItemChange({name: name, value: e, doSearchHandel: true})\r\n  }\r\n  return <Form.Item label={label}>\r\n    <Select\r\n      maxTagCount={maxTagCount}\r\n      maxTagTextLength={maxTagTextLength}\r\n      mode={mode}\r\n      showSearch\r\n      className={className}\r\n      placeholder={placeholder || label}\r\n      value={defaultVal}\r\n      name={name}\r\n      onChange={onChange}\r\n      dropdownMatchSelectWidth={false}\r\n    >\r\n      {$optionEl}\r\n    </Select>\r\n  </Form.Item>\r\n}\r\nexport default BlSelect;","/*\r\n * @Descripttion: 销售查询相关接口\r\n * @version: \r\n * @Author: liuminghao@benlai.com\r\n * @Date: 2019-09-27 14:50:04\r\n * @LastEditTime: 2019-10-12 12:53:47\r\n */\r\nimport config from '../utils/config'\r\nconst saleSearchUrl = {\r\n  // 销售汇总\r\n  summaryByGoods: `${config.reqUrlSupplier}/supplier/a/vendorSale/summaryByGoods`,\r\n  // 门店汇总\r\n  storeSale: `${config.reqUrlSupplier}/supplier/a/vendorSale/storeSale`,\r\n  // 单个商品在门店销售汇总\r\n  summaryGoodsEachStore: `${config.reqUrlSupplier}/supplier/a/vendorSale/summaryGoodsEachStore`\r\n}\r\n\r\nexport default saleSearchUrl;\r\n","import React from 'react';\r\nimport {Form, Select, Spin} from 'antd';\r\nconst Option = Select.Option;\r\n/**\r\n * @description: 结合ant通用的带有远程搜索，防抖控制，请求时序控制。\r\n * @return: \r\n */\r\nconst BlSelect = props => {\r\n  let {label, defaultVal, formItemChange, className: className = 'search-input', placeholder, optionsMap, doFetchHandel, fetchLoading} = props\r\n\r\n  const fetchHandel = (e) => {\r\n    e = e.replace(/\\s+/g,\"\")\r\n    if(!e) {\r\n      return\r\n    }\r\n    doFetchHandel(e)\r\n  }\r\n\r\n  const handleChange = (selectKey, selectKeyNode) => {\r\n    if(selectKeyNode && selectKey) {\r\n      let goodsNo = selectKeyNode.props.value\r\n      let goodsName = selectKeyNode.props.children\r\n      formItemChange({goodsNo: goodsNo, goodsName: goodsName, doSearchHandel: false})\r\n    }else {\r\n      let goodsNo = ''\r\n      let goodsName = ''\r\n      formItemChange({goodsNo: goodsNo, goodsName: goodsName, doSearchHandel: false})\r\n    }\r\n  }\r\n\r\n  return <Form.Item label={label}>\r\n    <Select\r\n      showSearch\r\n      value={defaultVal}\r\n      placeholder={placeholder}\r\n      notFoundContent={fetchLoading ? <Spin size=\"small\" /> : null}\r\n      showArrow={false}\r\n      filterOption={false}\r\n      onSearch={fetchHandel}\r\n      onChange={handleChange}\r\n      dropdownMatchSelectWidth={false}\r\n      className={className}\r\n      allowClear\r\n    >\r\n      {optionsMap.map(item => (\r\n        <Option key={item.value} value={item.value}>{item.label}</Option>\r\n      ))}\r\n    </Select>\r\n  </Form.Item>\r\n}\r\nexport default BlSelect;","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport './index.less';\r\nimport commonUrl from '../../api/commonUrl';\r\nimport saleSearchUrl from '../../api/saleSearchUrl';\r\nimport exportSheet from '../../utils/exportSheet';\r\nimport utils from '../../utils/utils';\r\nimport Storage from '../../utils/localStorage';\r\n\r\nimport BlInput from '../Common/SearchForm/BlInput';\r\nimport BlSelect from '../Common/SearchForm/BlSelect';\r\nimport BlSelectAsync from '../Common/SearchForm/BlSelectAsync';\r\nimport BlDatePicker from '../Common/SearchForm/BlDatePicker';\r\nimport BlSelectModelStoreTable from '../Common/SearchForm/BlSelectModelStoreTable';\r\n\r\nimport { Tabs, Form, Button, Icon, Popover, Table, message } from 'antd';\r\nconst { TabPane } = Tabs;\r\nconst yVal = document.body.clientHeight - 146;\r\n\r\nclass SearchOrder extends Component {\r\n  // 初始化页面常量 绑定事件方法\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userPermissionMap: props.userPermissionMap || {},\r\n      formLayout: 'vertical',\r\n      pageNum: 1,\r\n      pageSize: 10,\r\n      loading: false,\r\n      exportLoading: false,\r\n      total: 0,\r\n      // 起始日期，格式：yyyy-MM-dd\r\n      startDate: utils.dateFormat('yyyy-MM-dd', Date.parse(new Date()) - 86400000),\r\n      // 结束日期，格式：yyyy-MM-dd\r\n      endDate: utils.dateFormat('yyyy-MM-dd', Date.parse(new Date())),\r\n      // 门店编码\r\n      storeName: '',\r\n      storeNoList: [],\r\n      // 供应商编码列表\r\n      vendorNoList: [],\r\n      venderOptions: [],\r\n      // 商品列表\r\n      fetchLoading: false,\r\n      goodsOptions: [],\r\n      goodsName: undefined,\r\n      goodsNo: '',\r\n      // 商品条码\r\n      goodsBarcode: '',\r\n      // 货号 \r\n      vendorGoodsNo: '', \r\n      // 合同编码\r\n      contractNo: '',\r\n      columns: [\r\n        {\r\n          title: '序号',\r\n          dataIndex: 'index',\r\n          width: 50\r\n        },\r\n        {\r\n          title: '商品名称',\r\n          dataIndex: 'goodsName',\r\n          width: 120\r\n        },\r\n        {\r\n          title: '商品编码',\r\n          dataIndex: 'goodsNo',\r\n          width: 90\r\n        },\r\n        {\r\n          title: '货号',\r\n          dataIndex: 'vendorGoodsNo',\r\n          width: 80\r\n        },\r\n        {\r\n          title: '商品条码',\r\n          dataIndex: 'goodsBarcode',\r\n          width: 80\r\n        },\r\n        {\r\n          title: '合同编码',\r\n          dataIndex: 'contractNo',\r\n          width: 110,\r\n          render: (text) => (\r\n            <div style={{ wordWrap: 'break-word', wordBreak: 'break-word' }}>\r\n              {text}\r\n            </div>\r\n          )\r\n        },\r\n        {\r\n          title: '规格',\r\n          dataIndex: 'spec',\r\n          width: 60\r\n        },\r\n        {\r\n          title: '单位',\r\n          dataIndex: 'saleUnit',\r\n          width: 60\r\n        },\r\n        {\r\n          title: '销售量+赠品',\r\n          dataIndex: 'saleQty',\r\n          width: 120,\r\n          sorter: (a, b) => a.saleQty - b.saleQty\r\n        },\r\n        {\r\n          title: '销售额',\r\n          dataIndex: 'saleAmount',\r\n          width: 100,\r\n          sorter: (a, b) => a.saleAmount - b.saleAmount\r\n        },\r\n        {\r\n          title: '销售占比',\r\n          dataIndex: 'saleRatio',\r\n          width: 100,\r\n          sorter: (a, b) => a.saleRatio - b.saleRatio\r\n        },\r\n        {\r\n          title: '参考毛利额',\r\n          dataIndex: 'grossProfitAmount',\r\n          sorter: (a, b) => a.grossProfitAmount - b.grossProfitAmount\r\n        },\r\n        {\r\n          title: '操作',\r\n          fixed: 'right',\r\n          width: 100,\r\n          render: (item) => <Button type=\"link\" onClick={this.goDetailPage.bind(this, item)}><Icon type=\"eye\" />按门店查看</Button>\r\n        }\r\n      ],\r\n      columnsForStore: [\r\n        {\r\n          title: '序号',\r\n          dataIndex: 'index',\r\n          width: 60\r\n        },\r\n        {\r\n          title: '门店名称',\r\n          dataIndex: 'storeName',\r\n          width: 130\r\n        },\r\n        {\r\n          title: '所在区域',\r\n          dataIndex: 'areaStr',\r\n          width: 130\r\n        },\r\n        {\r\n          title: '销售额',\r\n          dataIndex: 'storeSaleAmount',\r\n          width: 130,\r\n          sorter: (a, b) => a.storeSaleAmount - b.storeSaleAmount\r\n        },\r\n        {\r\n          title: '销售占比',\r\n          dataIndex: 'storeSaleRatio',\r\n          width: 130,\r\n          sorter: (a, b) => a.storeSaleRatio - b.storeSaleRatio\r\n        },\r\n        {\r\n          title: '参考毛利额',\r\n          dataIndex: 'grossProfitAmount',\r\n          width: 130,\r\n          sorter: (a, b) => a.grossProfitAmount - b.grossProfitAmount\r\n        }\r\n      ],\r\n      tableData: [],\r\n      latestTime: '--', // 数据最新更新时间，格式：'yyyy-MM-dd HH:mm:ss'\r\n      totalGrossProfitAmount: '--', // 总毛利额\r\n      // 总销售额\r\n      totalSaleAmount: '--',\r\n      exportConfig: {\r\n        index: '序号',\r\n        goodsName: '商品名称',\r\n        goodsNo: '商品编码',\r\n        vendorGoodsNo: '货号',\r\n        goodsBarcode: '商品条码',\r\n        contractNo: '合同编码',\r\n        spec: '规格',\r\n        saleUnit: '单位',\r\n        saleQty: '销售量+赠品',\r\n        saleAmount: '销售额',\r\n        saleRatio: '销售占比',\r\n        grossProfitAmount: '参考毛利额'\r\n      },\r\n      exportConfigForStore: {\r\n        index: '序号',\r\n        storeName: '门店名称',\r\n        areaStr: '所在区域',\r\n        storeSaleAmount: '销售额',\r\n        storeSaleRatio: '销售占比',\r\n        grossProfitAmount: '毛利额'\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 获取供应商列表\r\n    this.getVenderList()\r\n\r\n    let searchContentMsg = Storage.get(\"searchContent\")\r\n    if(searchContentMsg) {\r\n      this.setState({...searchContentMsg}, () => {\r\n        this.doSearchHandel()\r\n      })\r\n    }else {\r\n      this.doSearchHandel()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { location } = this.props;\r\n    const userPermission = this.state.userPermissionMap[location.pathname]\r\n    const {columns, columnsForStore, tableData, latestTime, totalGrossProfitAmount, totalSaleAmount} = this.state;\r\n    let contentTabOne = (\r\n      <div style={{maxWidth: 300}}>\r\n        <div>参考毛利额：联营商品的每个门店的销售额减去对应的扣点金额（销售额*门店费率）之和，以每阶段的实际扣点计算；</div>\r\n        <div>销售额：仅显示联营类型的商品销售额；</div>\r\n        <div>销售占比：该商品销售额占总销售额的占比；</div>\r\n      </div>\r\n    );\r\n    let contentTabTwo = (\r\n      <div style={{maxWidth: 300}}>\r\n        <div>参考毛利额：联营商品的每个门店的销售额减去对应的扣点金额（销售额*门店费率）之和，以每阶段的实际扣点计算；</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"main-container\">\r\n        {\r\n          userPermission ? <Tabs onChange={this.tabsChange} type=\"card\">\r\n            {\r\n              userPermission.includes('汇总') ? <TabPane tab=\"汇总\" key=\"1\">\r\n                <div className=\"search-wraper\">\r\n                  <Form layout={this.state.formLayout}>\r\n                    <BlDatePicker label=\"单据开始时间\" defaultVal={this.state.startDate} name=\"startDate\" formItemChange={this.formItemChange} allowClear={false}/>\r\n                    <BlDatePicker label=\"单据结束时间\" defaultVal={this.state.endDate} name=\"endDate\" formItemChange={this.formItemChange} allowClear={false}/>\r\n                    <BlSelect label=\"供应商\" placeholder=\"选择供应商\" mode=\"multiple\" name=\"vendorNoList\" maxTagCount={1} maxTagTextLength={2} defaultVal={this.state.vendorNoList} optionsMap={this.state.venderOptions} formItemChange={this.formItemChange} />\r\n                    <BlSelectModelStoreTable label=\"门店\" placeholder=\"点击选择门店\" vendorNo={this.state.vendorNoList} venderOptions={this.state.venderOptions} confirmHandel={this.confirmHandel} defaultVal={this.state.storeName} />\r\n                    <BlSelectAsync label=\"商品名称或编码\" placeholder=\"商品名称或编码\" name=\"goodsNo\" defaultVal={this.state.goodsName} optionsMap={this.state.goodsOptions} doFetchHandel={this.doFetchGoodsHandel} fetchLoading={this.state.fetchLoading} formItemChange={this.selectAsyncHandel}/>\r\n                    <BlInput label=\"商品条码\" name=\"goodsBarcode\" defaultVal={this.state.goodsBarcode} formItemChange={this.formItemChange}/>\r\n                    <BlInput label=\"货号\" name=\"vendorGoodsNo\" defaultVal={this.state.vendorGoodsNo} formItemChange={this.formItemChange}/>\r\n                    <BlInput label=\"合同编码\" name=\"contractNo\" defaultVal={this.state.contractNo} formItemChange={this.formItemChange}/>\r\n                    <Form.Item\r\n                      className=\"btn-wrap\"\r\n                      label=\"&nbsp; \">\r\n                      <Button type=\"primary\" onClick={this.doSearchHandel.bind(this, true)}><Icon type=\"search\" />查询</Button>\r\n                      <Button onClick={this.doResetHandel.bind(this, 1)}><Icon type=\"reload\" />重置</Button>\r\n                      <Popover content=\"每次最多可导出2000条数据\" trigger=\"hover\">\r\n                        <Button onClick={this.doExportDataHandel.bind(this)} disabled={this.state.exportLoading}>{this.state.exportLoading ? <Icon type=\"loading\" /> : <Icon type=\"download\" />}导出</Button>\r\n                      </Popover>\r\n                    </Form.Item>\r\n                  </Form>\r\n                </div>\r\n                <hr className=\"s-slip\"/>\r\n                <div className=\"operation-wraper\">\r\n                  <span>总销售额：￥{totalSaleAmount}</span>\r\n                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                  <span>毛利额：￥{totalGrossProfitAmount}</span>\r\n\r\n                  <div style={{float: 'right'}}>\r\n                    <Popover content={contentTabOne} trigger=\"hover\" title=\"表格字段说明\" placement=\"topRight\">\r\n                      <Icon type=\"question-circle\" />帮助\r\n                    </Popover>\r\n                  </div>\r\n                </div>\r\n                <div className=\"content-wraper\">\r\n                  <Table \r\n                    loading={this.state.loading}\r\n                    rowKey={item => `${item.contractNo}${item.vendorNo}${item.goodsNo}${item.storeNo}`}\r\n                    columns={columns} \r\n                    dataSource={tableData} \r\n                    size=\"middle\"\r\n                    pagination={false}\r\n                    scroll={{ x: 1200, y: yVal }}/>\r\n                </div>\r\n                <div className=\"last-time-wraper\">数据更新时间：{latestTime}</div>\r\n              </TabPane> : null\r\n            }\r\n            {\r\n              userPermission.includes('门店汇总') ? <TabPane tab=\"门店汇总\" key=\"2\">\r\n                <div className=\"search-wraper\">\r\n                  <Form layout={this.state.formLayout}>\r\n                    <BlDatePicker label=\"单据开始时间\" defaultVal={this.state.startDate} name=\"startDate\" formItemChange={this.formItemChange} allowClear={false}/>\r\n                    <BlDatePicker label=\"单据结束时间\" defaultVal={this.state.endDate} name=\"endDate\" formItemChange={this.formItemChange} allowClear={false}/>\r\n                    <BlSelect label=\"供应商\" placeholder=\"选择供应商\" mode=\"multiple\" name=\"vendorNoList\" maxTagCount={1} maxTagTextLength={2} defaultVal={this.state.vendorNoList} optionsMap={this.state.venderOptions} formItemChange={this.formItemChange} />\r\n                    <BlSelectModelStoreTable label=\"门店\" placeholder=\"点击选择门店\" vendorNo={this.state.vendorNoList} venderOptions={this.state.venderOptions} confirmHandel={this.confirmHandel} defaultVal={this.state.storeName} />\r\n                    <Form.Item\r\n                      className=\"btn-wrap\"\r\n                      label=\"&nbsp; \">\r\n                      <Button type=\"primary\" onClick={this.doSearchHandelForStore.bind(this, true)}><Icon type=\"search\" />查询</Button>\r\n                      <Button onClick={this.doResetHandel.bind(this, 2)}><Icon type=\"reload\" />重置</Button>\r\n                      <Popover content=\"每次最多可导出2000条数据\" trigger=\"hover\">\r\n                        <Button onClick={this.doExportDataHandelForStore.bind(this)} disabled={this.state.exportLoading || this.state.tableData.length === 0}>{this.state.exportLoading ? <Icon type=\"loading\" /> : <Icon type=\"download\" />}导出</Button>\r\n                      </Popover>\r\n                    </Form.Item>\r\n                  </Form>\r\n                </div>\r\n                <hr className=\"s-slip\"/>\r\n                <div className=\"operation-wraper\">\r\n                  <span>总销售额：￥{totalSaleAmount}</span>\r\n                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                  <span>毛利额：￥{totalGrossProfitAmount}</span>\r\n                  <div style={{float: 'right'}}>\r\n                    <Popover content={contentTabTwo} trigger=\"hover\" title=\"表格字段说明\" placement=\"topRight\">\r\n                      <Icon type=\"question-circle\" />帮助\r\n                    </Popover>\r\n                  </div>\r\n                </div>\r\n                <div className=\"content-wraper\">\r\n                  <Table \r\n                    loading={this.state.loading}\r\n                    rowKey={item => `${item.index}${item.storeNo}`}\r\n                    columns={columnsForStore} \r\n                    dataSource={tableData} \r\n                    size=\"middle\"\r\n                    pagination={false}\r\n                    scroll={{ x: 720, y: yVal }}/>\r\n                </div>\r\n                <div className=\"last-time-wraper\">数据更新时间：{latestTime}</div>\r\n              </TabPane> : null\r\n            }\r\n          </Tabs> : null\r\n        } \r\n      </div>\r\n    );\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if(nextProps.userPermissionMap) {\r\n      this.setState({\r\n        userPermissionMap: nextProps.userPermissionMap\r\n      })\r\n    }\r\n  }\r\n\r\n  formItemChange = (result) => {\r\n    this.setState({\r\n      [result.name]: result.value\r\n    })\r\n  }\r\n\r\n  confirmHandel = (result) => {\r\n    this.setState({\r\n      storeNoList: result.storeNo,\r\n      storeName: result.storeName\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description: 远程搜索商品\r\n   * @param {type} \r\n   * @return: \r\n   */\r\n  doFetchGoodsHandel = (e) => {\r\n    let vendorNoListTemp = this.state.vendorNoList && this.state.vendorNoList.length > 0 ? this.state.vendorNoList : this.state.venderOptions.map(item => {\r\n      return item.value\r\n    })\r\n    let params = {\r\n      pageNum: 1,\r\n      pageSize: -1,\r\n      storeNoList: this.state.storeNo,\r\n      vendorNoList: vendorNoListTemp,\r\n      searchValue: e\r\n    }\r\n    this.setState({\r\n      fetchLoading: true,\r\n      goodsOptions: []\r\n    })\r\n    this.$http.post(commonUrl.queryVendorGoodsPageList, {...params}).then(res=>{\r\n      this.setState({\r\n        fetchLoading: false\r\n      })\r\n      if(res.code === 0) {\r\n        let goodsList = res.data && res.data.result && res.data.result.length ? res.data.result : []\r\n        let goodsListTemp = goodsList.map(item => {\r\n          let newItem = { \r\n            id: item.goodsId,\r\n            value: item.goodsNo,\r\n            label: item.goodsNoName\r\n          }\r\n          return newItem;\r\n        })\r\n        this.setState({\r\n          goodsOptions: goodsListTemp\r\n        })\r\n        return\r\n      }\r\n      throw new Error(res.msg)\r\n    }).catch(e=>{\r\n      this.setState({\r\n        fetchLoading: false,\r\n        goodsOptions: []\r\n      })\r\n      utils.openNotification('error', '系统提示', e.message || '')\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description: 远程搜索商品确定之后返回内容\r\n   * @param {type} \r\n   * @return: \r\n   */\r\n  selectAsyncHandel = (result) => {\r\n    this.setState({\r\n      goodsNo: result.goodsNo,\r\n      goodsName: result.goodsName\r\n    })\r\n  }\r\n\r\n  tabsChange = (e) => {\r\n    this.setState({\r\n      // 起始日期，格式：yyyy-MM-dd\r\n      startDate: utils.dateFormat('yyyy-MM-dd', Date.parse(new Date()) - 86400000),\r\n      // 结束日期，格式：yyyy-MM-dd\r\n      endDate: utils.dateFormat('yyyy-MM-dd', Date.parse(new Date())),\r\n      // 门店编码\r\n      storeName: '',\r\n      storeNoList: [],\r\n      // 供应商编码列表\r\n      vendorNoList: [],\r\n      // 商品列表\r\n      fetchLoading: false,\r\n      goodsOptions: [],\r\n      goodsName: undefined,\r\n      goodsNo: '',\r\n      // 商品条码\r\n      goodsBarcode: '',\r\n      // 货号 \r\n      vendorGoodsNo: '', \r\n      // 合同编码\r\n      contractNo: '',\r\n      tableData: [],\r\n      latestTime: '--', // 数据最新更新时间，格式：'yyyy-MM-dd HH:mm:ss'\r\n      totalGrossProfitAmount: '--', // 总毛利额\r\n      // 总销售额\r\n      totalSaleAmount: '--'\r\n    }, () => {\r\n      if(parseInt(e) === 1) {\r\n        this.doSearchHandel(true)\r\n      }else if(parseInt(e) === 2) {\r\n        this.doSearchHandelForStore(true)\r\n      }\r\n    })\r\n  }\r\n\r\n  doResetHandel = (param) => {\r\n    this.tabsChange(param)\r\n  }\r\n\r\n  getVenderList = () => {\r\n    let params = {\r\n      requireVendorName: true,\r\n      userNo: Storage.get('loginInfo') ? Storage.get('loginInfo').UserNO : ''\r\n    }\r\n    this.$http.post(commonUrl.vendorList, {...params}).then(res => {\r\n      if(res.code === 0) {\r\n        let venderOptionsArr = res.data && res.data.length ? res.data.map((item) => {\r\n          let newItem = {\r\n            id: item.vendorNo,\r\n            value: item.vendorNo,\r\n            label: item.vendorName\r\n          }\r\n          return newItem\r\n        }) : []\r\n        this.setState({\r\n          venderOptions: venderOptionsArr\r\n        })\r\n        return\r\n      }\r\n      throw new Error(res.msg);\r\n    }).catch(e => {\r\n      console.log(\"【供应商提示】:\", e.message)\r\n    })\r\n  }\r\n\r\n  onPageSizeChange = (current, pageSize) => {\r\n    this.setState({\r\n      pageSize: pageSize\r\n    }, () => {\r\n      this.doSearchHandel()\r\n    })\r\n  }\r\n\r\n  pageNumChange = (pageNumber) => {\r\n    this.setState({\r\n      pageNum: pageNumber\r\n    }, () => {\r\n      this.doSearchHandel()\r\n    })\r\n  }\r\n\r\n  showTotal = () => {\r\n    return `共 ${this.state.total} 条`;\r\n  }\r\n\r\n  doSearchHandel = (param) => {\r\n    let {startDate, endDate, storeNoList, vendorNoList, goodsNo, goodsBarcode, vendorGoodsNo, contractNo} = this.state\r\n    let startDateTemp = Date.parse(new Date(startDate.replace(/-/g, '/')))\r\n    let endDateTemp = Date.parse(new Date(endDate.replace(/-/g, '/')))\r\n    if(startDateTemp > endDateTemp) {\r\n      message.warning('结束时间不能早于开始时间！');\r\n      return \r\n    }\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    let _params = {startDate,endDate,storeNoList,vendorNoList,goodsNo,goodsBarcode,vendorGoodsNo,contractNo}\r\n    this.$http.post(saleSearchUrl.summaryByGoods, {..._params}).then(res => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      if(res.code === 0) {\r\n        let resultVal = res.data ? res.data : {}\r\n        let tableDataList =  resultVal.goodsList && resultVal.goodsList ? resultVal.goodsList : []\r\n        let tableDataListTemp = tableDataList.map((item, idx) => {\r\n          item.index = idx + 1\r\n          item.saleQty = item.saleQty ? item.saleQty.toFixed(3) : item.saleQty\r\n          item.saleAmount = item.saleAmount ? item.saleAmount.toFixed(2) : item.saleAmount\r\n          item.storeSaleRatio = item.storeSaleRatio ? item.storeSaleRatio.toFixed(2) : item.storeSaleRatio\r\n          item.grossProfitAmount = item.grossProfitAmount ? item.grossProfitAmount.toFixed(2) : item.grossProfitAmount\r\n          return item\r\n        })\r\n        this.setState({\r\n          latestTime: resultVal.latestTime || '--',\r\n          totalGrossProfitAmount: resultVal.totalGrossProfitAmount ? resultVal.totalGrossProfitAmount.toFixed(2) : '--',\r\n          totalSaleAmount: resultVal.totalSaleAmount ? resultVal.totalSaleAmount.toFixed(2) : '--',\r\n          tableData: tableDataListTemp,\r\n          total: resultVal.total\r\n        })\r\n        return\r\n      }\r\n      throw new Error(res.msg)\r\n    }).catch(e => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      utils.openNotification('error', '系统提示', e.message || '')\r\n    })\r\n  }\r\n\r\n  doSearchHandelForStore = (param) => {\r\n    let {startDate, endDate, storeNoList, vendorNoList} = this.state\r\n    let startDateTemp = Date.parse(new Date(startDate.replace(/-/g, '/')))\r\n    let endDateTemp = Date.parse(new Date(endDate.replace(/-/g, '/')))\r\n    if(startDateTemp > endDateTemp) {\r\n      message.warning('结束时间不能早于开始时间！');\r\n      return \r\n    }\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    let _params = {startDate,endDate,storeNoList,vendorNoList}\r\n    this.$http.post(saleSearchUrl.storeSale, {..._params}).then(res => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      if(res.code === 0) {\r\n        let resultVal = res.data ? res.data : {}\r\n        let tableDataList = resultVal.storeSaleList && resultVal.storeSaleList ? resultVal.storeSaleList : []\r\n        let tableDataListTemp = tableDataList.map((item, idx) => {\r\n          item.index = idx + 1\r\n          if(item.provinceName && item.cityName) {\r\n            item.areaStr = `${item.provinceName}-${item.cityName}`\r\n          }else if(item.provinceName) {\r\n            item.areaStr = `${item.provinceName}`\r\n          }else if(item.cityName) {\r\n            item.areaStr = `${item.cityName}`\r\n          }else {\r\n            item.areaStr = `-`\r\n          }\r\n          item.storeSaleAmount = item.storeSaleAmount ? item.storeSaleAmount.toFixed(2) : ''\r\n          item.storeSaleRatio = item.storeSaleRatio ? item.storeSaleRatio.toFixed(2) : item.storeSaleRatio\r\n          item.grossProfitAmount = item.grossProfitAmount ? item.grossProfitAmount.toFixed(2) : ''\r\n          return item\r\n        })\r\n        this.setState({\r\n          latestTime: resultVal.latestTime || '--',\r\n          totalGrossProfitAmount: resultVal.totalGrossProfitAmount ? resultVal.totalGrossProfitAmount.toFixed(2) : '--',\r\n          totalSaleAmount: resultVal.totalSaleAmount ? resultVal.totalSaleAmount.toFixed(2) : '--',\r\n          tableData: tableDataListTemp,\r\n          total: resultVal.total\r\n        })\r\n        return\r\n      }\r\n      throw new Error(res.msg)\r\n    }).catch(e => {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      utils.openNotification('error', '系统提示', e.message || '')\r\n    })\r\n  }\r\n\r\n  doExportDataHandel = () => {\r\n    let {startDate, endDate, storeNoList, vendorNoList, goodsNo, goodsBarcode, vendorGoodsNo, contractNo} = this.state\r\n    let startDateTemp = Date.parse(new Date(startDate.replace(/-/g, '/')))\r\n    let endDateTemp = Date.parse(new Date(endDate.replace(/-/g, '/')))\r\n    if(startDateTemp > endDateTemp) {\r\n      message.warning('结束时间不能早于开始时间！');\r\n      return \r\n    }\r\n    this.setState({\r\n      exportLoading: true\r\n    })\r\n    let _params = {startDate,endDate,storeNoList,vendorNoList,goodsNo,goodsBarcode,vendorGoodsNo,contractNo, isReport: 1}\r\n    this.$http.post(saleSearchUrl.summaryByGoods, {..._params}).then(res => {\r\n      this.setState({\r\n        exportLoading: false\r\n      })\r\n      if(res.code === 0) {\r\n        let resultVal = res.data ? res.data : {}\r\n        let tableDataList =  resultVal.goodsList && resultVal.goodsList ? resultVal.goodsList : []\r\n        let tableDataListTemp = tableDataList.map((item, idx) => {\r\n          item.index = idx + 1\r\n          item.saleQty = item.saleQty ? item.saleQty.toFixed(3) : item.saleQty\r\n          item.saleAmount = item.saleAmount ? item.saleAmount.toFixed(2) : item.saleAmount\r\n          item.storeSaleRatio = item.storeSaleRatio ? item.storeSaleRatio.toFixed(2) : item.storeSaleRatio\r\n          item.grossProfitAmount = item.grossProfitAmount ? item.grossProfitAmount.toFixed(2) : item.grossProfitAmount\r\n          return item\r\n        })\r\n        exportSheet.exportFileByConfig(tableDataListTemp, `本来鲜销售数据_${startDate}~${endDate}.xlsx`, this.state.exportConfig)\r\n        return\r\n      }\r\n      throw new Error(res.msg)\r\n    }).catch(e => {\r\n      this.setState({\r\n        exportLoading: false\r\n      })\r\n      utils.openNotification('error', '系统提示', e.message || '')\r\n    })\r\n  }\r\n\r\n  doExportDataHandelForStore = () => {\r\n    this.setState({\r\n      exportLoading: true\r\n    })\r\n    let tableData = this.state.tableData\r\n    let startDate = this.state.startDate\r\n    let endDate = this.state.endDate\r\n    if(tableData.length > 0) {\r\n      exportSheet.exportFileByConfig(tableData, `本来鲜销售数据_${startDate}~${endDate}.xlsx`, this.state.exportConfigForStore)\r\n      this.setState({\r\n        exportLoading: false\r\n      })\r\n    }else {\r\n      utils.openNotification('warning', '系统提示', '没有查询到可导出数据')\r\n      this.setState({\r\n        exportLoading: false\r\n      })\r\n    }\r\n  }\r\n\r\n  goDetailPage = (_row) => {\r\n    let {startDate, endDate, storeName, storeNoList, vendorNoList, goodsName, goodsNo, goodsBarcode, vendorGoodsNo, contractNo} = this.state\r\n    let searchContent = {startDate, endDate, storeName, storeNoList, vendorNoList, goodsName, goodsNo, goodsBarcode, vendorGoodsNo, contractNo}\r\n    Storage.set(\"searchContent\", searchContent)\r\n\r\n    const {history} = this.props\r\n    history.push(`/sale_search/${_row.goodsNo}`)\r\n  }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  userPermissionMap: state.userPermission.userPermissionMap\r\n})\r\n\r\nexport default connect(mapStateToProps, {})(SearchOrder);\r\n"],"sourceRoot":""}